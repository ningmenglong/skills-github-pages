System.register("chunks:///_virtual/bossmange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./groupBoss.ts","./evenenum.ts","./Global.ts","./Player.ts"],(function(t){var s,i,o,e,n,a,r,l,c,u,h,b,d,f,p,v,m,g,y;return{setters:[function(t){s=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t._decorator,l=t.Prefab,c=t.Node,u=t.Label,h=t.Button,b=t.Pool,d=t.instantiate,f=t.randomRangeInt,p=t.Component},function(t){v=t.groupBoss},function(t){m=t.EVENTS},function(t){g=t.gameConfig},function(t){y=t.Player}],execute:function(){var C,w,P,I,B,D,L,W,z,A,N,x,F;a._RF.push({},"69c64ylpl9E8KWxVGydUZW3","bossmange",void 0);var M=r.ccclass,E=r.property;t("bossmange",(C=M("bossmange"),w=E(l),P=E(c),I=E(c),B=E(u),D=E(c),C((z=s((W=function(t){function s(){for(var s,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(s=t.call.apply(t,[this].concat(n))||this).maxtime=20,s.mintime=20,s.pool=null,s.bosslist=[],s.intervalId=void 0,s.player=void 0,o(s,"bossprefab",z,e(s)),o(s,"findbossui",A,e(s)),o(s,"startbossui",N,e(s)),o(s,"timeLabel",x,e(s)),o(s,"huntboss",F,e(s)),s}i(s,t);var a=s.prototype;return a.start=function(){var t=this;this.player=this.node.getParent().getChildByName("player"),this.findbossui.active=!1,this.startbossui.active=!1,this.huntboss.getComponent(h).interactable=!1,this.pool=new b((function(){return d(t.bossprefab)}),30,(function(t){t.removeFromParent()}))},a.update=function(t){},a.bosscomeon=function(){if(this.bosslist.length<=0){var t=f(this.mintime,this.maxtime);this.scheduleOnce(this.bosscomeon,t)}else this.startCountdown(5),this.findbossui.active=!0},a.countdownboss=function(t){t<=0&&(t=f(this.mintime,this.maxtime)),this.startbossui.active=!0,this.startCountdown(t)},a.createbossall=function(){var t=this;this.bosslist.forEach((function(s,i,o){t.createonboss(s)}))},a.onstartboss=function(){this.clearselfintervalid(),1==this.findbossui.active&&(this.findbossui.active=!1),1==this.startbossui.active&&(this.startbossui.active=!1);var t=this.bosslist.length,s=f(0,t-1);this.createonboss(this.bosslist[s]),this.sethuntbossflag(!0)},a.createonboss=function(t){var s=this.pool.alloc();this.node.addChild(s),s.getComponent(v).oninit(t),s.once(m.OnBossDie,this.onBossDie,this);var i=Math.ceil(4*Math.random()),o=f(-150,-50);1==i&&s.setPosition(Math.random()*g.mapWidth-g.mapWidth/2,o),2==i&&s.setPosition(Math.random()*g.mapWidth-g.mapWidth/2,o),3==i&&s.setPosition(g.mapWidth/2+40,o),4==i&&s.setPosition(-g.mapWidth/2-40,o),s.active=!0},a.oninitbossmanage=function(t,s){this.onsetbosslist(t),this.countdownboss(s),this.startbossui.active=!0},a.onsetbosslist=function(t){this.bosslist=t},a.onBossDie=function(t){console.log("onBossDie"),t.active=!1,this.pool.free(t),this.player.getComponent(y).onbossfightover(),this.destoryAllChildNode(),this.oncancleboss()},a.oncancleboss=function(){this.clearselfintervalid(),this.findbossui.active=!1,this.startbossui.active=!1,this.countdownboss(0)},a.onDestroy=function(){this.clearselfintervalid(),this.pool.destroy()},a.clearselfintervalid=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},a.startCountdown=function(t){var s=this;console.log("startCountdown start"),this.timeLabel.string=t+"s",this.intervalId=setInterval((function(){--t>=0?s.timeLabel.string=t+"s":(console.log("startCountdown player"),s.player.getComponent(y).getboss())}),1e3)},a.waitboss=function(){1==this.findbossui.active&&(this.findbossui.active=!1),this.startbossui.active=!0},a.getbossnode=function(){return null},a.sethuntbossflag=function(t){this.huntboss.getComponent(h).interactable=t},a.onclearboss=function(){var t=this;this.findbossui.active=!1,this.startbossui.active=!1,this.unscheduleAllCallbacks(),this.clearselfintervalid(),this.node.destroyAllChildren(),this.pool.destroy(),this.pool=new b((function(){return d(t.bossprefab)}),30,(function(t){t.removeFromParent()}))},a.destoryAllChildNode=function(){for(var t,s=n(this.node.children);!(t=s()).done;){var i=t.value;i.active=!1,this.pool.free(i)}},a.onhuntbossfaild=function(){this.destoryAllChildNode();var t=this.player.getComponent(y);t.onhuntbossresult(!1,0),t.onbossfightover(),this.oncancleboss()},s}(p)).prototype,"bossprefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=s(W.prototype,"findbossui",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=s(W.prototype,"startbossui",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=s(W.prototype,"timeLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=s(W.prototype,"huntboss",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=W))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/Bossskill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bulletboss.ts","./BulletProperty.ts","./evenenum.ts","./itemenum.ts"],(function(t){var e,l,o,n,s,r,u,i,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){l=t.cclegacy,o=t._decorator,n=t.Pool,s=t.instantiate,r=t.Component},function(t){u=t.bulletboss},function(t){i=t.BulletProperty},function(t){a=t.EVENTS},function(t){c=t.ITEMTYPE}],execute:function(){var p;l._RF.push({},"a5105I+KftLuLNvvUr6nhGh","Bossskill",void 0);var h=o.ccclass;o.property,t("Bossskill",h("Bossskill")(p=function(t){function l(e,l,o){var n;return(n=t.call(this)||this).bulletPrefab=null,n.bulletmange=void 0,n.pool=null,n.BulletProperty=new i,n.bulletnum=1,n.owner=void 0,n.bulletid=void 0,console.log("Bossskill 构造函数"),console.log(e.bullettype),n.bulletmange=l.bulletmange,n.bulletPrefab=l.bulletPrefab.get(e.bullettype),n.BulletProperty=e,n.owner=l,n.bulletnum=o,n.bulletid=0,n}e(l,t);var o=l.prototype;return o.start=function(){var t=this;this.pool=new n((function(){return s(t.bulletPrefab)}),30,(function(t){t.removeFromParent()})),this.onstartitem()},o.onDestroy=function(){this.unscheduleAllCallbacks(),this.pool.destroy()},o.resetitem=function(t,e){this.unscheduleAllCallbacks(),this.BulletProperty=t,this.bulletnum=e,this.onstartitem()},o.onstartitem=function(){},o.createBullet=function(){for(var t=[],e=0;e<this.bulletnum;e++)t.push(this.createOneBullet())},o.createOneBullet=function(){this.BulletProperty.startpos=this.getstartpos();var t=this.owner.getenemybytargettype(this.BulletProperty.targettype),e=this.pool.alloc(),l=e.getComponent(u);return this.bulletid++,l.initself(t,this.BulletProperty,this.owner.enemymange,this.bulletid),null==e.parent&&this.bulletmange.addChild(e),e.once(a.onBulletDie,this.onBulletDie,this),this.BulletProperty.bullettype==c.BOSSSKILLTYPE&&e.setRotationFromEuler(0,0,-90),e.active=!0,l},o.getstartpos=function(){return this.BulletProperty.bullettype,this.BulletProperty.startpos},o.onBulletDie=function(t){t.node.active=!1,this.pool.free(t.node)},l}(r))||p);l._RF.pop()}}}));

System.register("chunks:///_virtual/bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletProperty.ts","./evenenum.ts","./itemenum.ts","./commonfunctiond.ts","./Global.ts","./fireControl.ts"],(function(t){var e,n,o,i,s,l,r,h,u,p,a,d,c,y,m,g,B,P;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Sprite,s=t.BoxCollider2D,l=t.ProgressBar,r=t.CircleCollider2D,h=t.Vec2,u=t.Collider2D,p=t.Contact2DType,a=t.Component},function(t){d=t.BulletProperty},function(t){c=t.EVENTS},function(t){y=t.ITEMTYPE},function(t){m=t.SetSpriteImage,g=t.circlemove},function(t){B=t.gameConfig},function(t){P=t.fireControl}],execute:function(){var f;n._RF.push({},"53ba8LAHAVCAagWaDxv1wHG","bullet",void 0);var C=o.ccclass;o.property,t("bullet",C("bullet")(f=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).BulletProperty=new d,e.collider=null,e.target=null,e.enemymange=null,e.rotate=0,e.nowpennum=1,e.currenthp=100,e.bulletid=void 0,e.nowangle=void 0,e}e(n,t);var o=n.prototype;return o.start=function(){},o.initself=function(t,e,n,o){var h=this;if(this.nowangle=-Math.PI/2,this.bulletid=o,this.target=t,this.BulletProperty=e,this.enemymange=n,this.nowpennum=e.penetratenum,this.currenthp=e.maxhp,this.node.setPosition(this.BulletProperty.startpos.x,this.BulletProperty.startpos.y),this.BulletProperty.bulleticonname.length>0&&m(this.BulletProperty.bulleticonname,this.node.getChildByName("bicon").getComponent(i)),this.BulletProperty.statetime>0&&this.scheduleOnce((function(){h.onbulletdie()}),this.BulletProperty.statetime),this.addCollisionListener(),this.BulletProperty.bullettype==y.APPLE){this.node.getComponent(s).enabled=!0;var u=this.node.getChildByName("hp").getComponent(l);null!=u&&(u.progress=1),this.node.on(c.OnCommonChangeHp,this.onchangehp,this)}else this.node.getComponent(r).enabled=!0;e.xspeed<0&&this.node.setRotationFromEuler(0,0,90)},o.update=function(t){if(this.currenthp<=0)this.onbulletdie();else if(this.isoutofscreen())this.onbulletdie();else{var e=this.node.getPosition(),n=new h(e.x,e.y);if(h.distance(this.BulletProperty.startpos,n)>=this.BulletProperty.limitdis)this.onbulletdie();else{if(this.BulletProperty.bullettype==y.LIGHTNING)this.nowangle=g(this.nowangle,2,this.BulletProperty.startpos.x,this.BulletProperty.startpos.y,this.BulletProperty.boombrange,this.node);else{var o=1,i=1;if(null!=this.target&&this.target.active){var s=this.target.getWorldPosition(),l=new h(s.x,s.y),r=this.node.getWorldPosition(),u=new h(r.x,r.y),p=l.subtract(u).angle(new h(1,0));o=Math.cos(p),i=Math.sin(p)}this.node.setPosition(this.node.position.x+t*this.BulletProperty.xspeed*o,this.node.position.y+t*this.BulletProperty.yspeed*i)}this.BulletProperty.isrotate>0&&(this.rotate=this.rotate+this.BulletProperty.isrotate*t,this.node.setRotationFromEuler(0,0,this.rotate))}}},o.addCollisionListener=function(){var t=this.node.getComponent(u);null!=t&&(this.BulletProperty.bullettype!=y.BOMB?this.BulletProperty.bullettype!=y.APPLE?this.BulletProperty.bullettype!=y.BOSSCAGE?this.BulletProperty.bullettype!=y.LIGHTNING?t.on(p.BEGIN_CONTACT,this.onTriggerEnter,this):t.on(p.BEGIN_CONTACT,this.onlightning,this):t.on(p.BEGIN_CONTACT,this.onhuntboss,this):t.on(p.BEGIN_CONTACT,this.onapplebullet,this):t.on(p.BEGIN_CONTACT,this.onbulletboom,this))},o.onDestroy=function(){},o.onTriggerEnter=function(t,e,n){e.node.emit(c.OnEnemyChangeHp,this.BulletProperty,this.node),this.oncommontri()},o.onbulletboom=function(t,e,n){var o=this;this.node.parent.getComponent(P).createFire(this.node);var i=new h(this.node.getPosition().x,this.node.getPosition().y),s=this.enemymange.getrangeenemy(i,this.BulletProperty.boombrange);s.forEach((function(t,e,n){t.emit(c.OnEnemyChangeHp,o.BulletProperty,o.node)})),console.log(s.length),this.oncommontri()},o.onapplebullet=function(t,e,n){e.node.emit(c.OnEnemyChangeHp,this.BulletProperty,this.node)},o.onchangehp=function(t){this.currenthp+=t,this.currenthp<=0&&(this.currenthp=0);var e=this.node.getChildByName("hp").getComponent(l);null!=e&&(e.progress=this.currenthp/this.BulletProperty.maxhp)},o.onhuntboss=function(t,e,n){e.node.emit(c.OnHuntBoss,this.BulletProperty.art,this.node)},o.onlightning=function(t,e,n){e.node.emit(c.OnEnemyChangeHp,this.BulletProperty,this.node)},o.oncommontri=function(){this.nowpennum--,this.nowpennum<=0&&this.onbulletdie()},o.isoutofscreen=function(){var t=B.mapWidth/2,e=B.mapHeight/2,n=this.node.position.x+this.node.parent.parent.position.x,o=this.node.position.y+this.node.parent.parent.position.y-320;if(n>t||n<-t){if(this.BulletProperty.bullettype!=y.SWORD)return!0;this.BulletProperty.xspeed=-this.BulletProperty.xspeed,this.BulletProperty.xspeed<0&&this.node.setRotationFromEuler(0,0,90),this.BulletProperty.xspeed>0&&this.node.setRotationFromEuler(0,0,0)}return o>e||o<-e},o.onbulletdie=function(){var t=this.node.getComponent(u);null!=t&&t.removeAll(p.BEGIN_CONTACT),this.bulletid=0,this.node.setRotationFromEuler(0,0,0),this.node.off(c.OnCommonChangeHp,this.onchangehp,this),this.node.emit(c.onBulletDie,this.node)},o.getbulletid=function(){return this.bulletid},n}(a))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/bulletboss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletProperty.ts","./evenenum.ts","./itemenum.ts","./commonfunctiond.ts","./Global.ts"],(function(t){var e,o,n,i,s,l,r,u,h,p,a,c,d,y;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.BoxCollider2D,s=t.Vec2,l=t.Collider2D,r=t.Contact2DType,u=t.ProgressBar,h=t.Component},function(t){p=t.BulletProperty},function(t){a=t.EVENTS},function(t){c=t.ITEMTYPE},function(t){d=t.circlemove},function(t){y=t.gameConfig}],execute:function(){var m;o._RF.push({},"5c15bGMGWFJA5ZXvlhdmoEi","bulletboss",void 0);var g=n.ccclass;n.property,t("bulletboss",g("bulletboss")(m=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).BulletProperty=new p,e.collider=null,e.target=null,e.enemymange=null,e.rotate=0,e.nowpennum=1,e.currenthp=100,e.bulletid=void 0,e.nowangle=void 0,e}e(o,t);var n=o.prototype;return n.start=function(){},n.initself=function(t,e,o,n){var s=this;this.nowangle=-Math.PI/2,this.bulletid=n,this.target=t,this.BulletProperty=e,this.enemymange=o,this.nowpennum=e.penetratenum,this.currenthp=e.maxhp,this.node.setPosition(this.BulletProperty.startpos.x,this.BulletProperty.startpos.y),this.BulletProperty.statetime>0&&this.scheduleOnce((function(){s.onbulletdie()}),this.BulletProperty.statetime),this.addCollisionListener(),this.node.getComponent(i).enabled=!0,console.log("initself xspeed"),console.log(this.BulletProperty.xspeed),console.log("initself yspeed"),console.log(this.BulletProperty.yspeed)},n.update=function(t){if(this.currenthp<=0)this.onbulletdie();else if(this.isoutofscreen())this.onbulletdie();else{var e=this.node.getPosition(),o=new s(e.x,e.y);if(s.distance(this.BulletProperty.startpos,o)>=this.BulletProperty.limitdis)this.onbulletdie();else{if(this.BulletProperty.bullettype==c.LIGHTNING)this.nowangle=d(this.nowangle,2,this.BulletProperty.startpos.x,this.BulletProperty.startpos.y,this.BulletProperty.boombrange,this.node);else{var n=1,i=1;if(null!=this.target&&this.target.active){var l=this.target.getWorldPosition(),r=new s(l.x,l.y),u=this.node.getWorldPosition(),h=new s(u.x,u.y),p=r.subtract(h).angle(new s(1,0));n=Math.cos(p),i=Math.sin(p)}this.node.setPosition(this.node.position.x+t*this.BulletProperty.xspeed*n,this.node.position.y+t*this.BulletProperty.yspeed*i)}this.BulletProperty.isrotate>0&&(this.rotate=this.rotate+this.BulletProperty.isrotate*t,this.node.setRotationFromEuler(0,0,this.rotate))}}},n.addCollisionListener=function(){var t=this.node.getComponent(l);null!=t&&t.on(r.BEGIN_CONTACT,this.onTriggerEnter,this)},n.onDestroy=function(){},n.onTriggerEnter=function(t,e,o){e.node.emit(a.OnEnemyChangeHp,this.BulletProperty,this.node),this.oncommontri()},n.onchangehp=function(t){this.currenthp+=t,this.currenthp<=0&&(this.currenthp=0);var e=this.node.getChildByName("hp").getComponent(u);null!=e&&(e.progress=this.currenthp/this.BulletProperty.maxhp)},n.oncommontri=function(){this.nowpennum--,this.nowpennum<=0&&this.onbulletdie()},n.isoutofscreen=function(){var t=y.mapWidth/2,e=y.mapHeight/2;if(this.node.position.x>t||this.node.position.x<-t){if(this.BulletProperty.bullettype!=c.SWORD)return!0;this.BulletProperty.xspeed=-this.BulletProperty.xspeed,this.BulletProperty.xspeed<0&&this.node.setRotationFromEuler(0,0,90),this.BulletProperty.xspeed>0&&this.node.setRotationFromEuler(0,0,0)}return this.node.position.y>e||this.node.position.y<-e},n.onbulletdie=function(){this.BulletProperty.bullettype==c.BOSSSKILLTYPE&&console.log("bossskill createOneBullet onbulletdie");var t=this.node.getComponent(l);null!=t&&t.removeAll(r.BEGIN_CONTACT),this.bulletid=0,this.node.setRotationFromEuler(0,0,0),this.node.off(a.OnCommonChangeHp,this.onchangehp,this),this.node.emit(a.onBulletDie,this.node)},n.getbulletid=function(){return this.bulletid},o}(h))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/BulletEmitter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bullet.ts","./BulletProperty.ts","./evenenum.ts","./itemenum.ts","./commonfunctiond.ts","./Player.ts"],(function(t){var e,l,o,r,n,s,u,i,a,p,c,y,h,B,P;return{setters:[function(t){e=t.inheritsLoose},function(t){l=t.cclegacy,o=t._decorator,r=t.Pool,n=t.instantiate,s=t.sp,u=t.Vec2,i=t.Component},function(t){a=t.bullet},function(t){p=t.BulletProperty},function(t){c=t.EVENTS},function(t){y=t.ITEMTYPE},function(t){h=t.getanimationnamebywx,B=t.getRandomInt},function(t){P=t.Player}],execute:function(){var b;l._RF.push({},"ae18bDixnZJNoEsedDWe7r+","BulletEmitter",void 0);var m=o.ccclass;o.property,t("BulletEmitter",m("BulletEmitter")(b=function(t){function l(e,l,o){var r;return(r=t.call(this)||this).bulletPrefab=null,r.bulletmange=void 0,r.pool=null,r.BulletProperty=new p,r.bulletnum=1,r.owner=void 0,r.bulletid=void 0,r.bulletmange=l.getitemiconnode(e.bullettype).getChildByName("bulletmng"),r.bulletPrefab=l.bulletPrefab.get(e.bullettype),r.BulletProperty=e,r.BulletProperty.startpos=new u(r.bulletmange.getPosition().x,r.bulletmange.getPosition().y),r.owner=l,r.bulletnum=o,r.bulletid=0,r}e(l,t);var o=l.prototype;return o.start=function(){var t=this;this.pool=new r((function(){return n(t.bulletPrefab)}),30,(function(t){t.removeFromParent()})),this.onstartitem()},o.onDestroy=function(){this.unscheduleAllCallbacks(),this.bulletmange.destroyAllChildren(),this.pool.destroy()},o.resetitem=function(t,e){this.unscheduleAllCallbacks(),this.BulletProperty=t,this.bulletnum=e,this.onstartitem()},o.onstartitem=function(){var t=this;this.BulletProperty.bullettype!=y.BOSSCAGE&&(this.BulletProperty.bullettype==y.WATREBULLET?this.schedule((function(){var e=t.pool.alloc(),l=e.getComponent(a);t.bulletid++,t.bulletmange.addChild(e),e.setPosition(t.owner.node.getPosition()),e.active=!0,l.scheduleOnce((function(){t.onBulletDie(e)}),1),t.owner.updateHp(t.BulletProperty.art)}),this.BulletProperty.bulletcd):(this.createBullet(),this.schedule((function(){t.createBullet()}),this.BulletProperty.bulletcd)))},o.createBullet=function(){if(this.owner.getComponent(P).playerneedskill()){for(var t=[],e=0;e<this.bulletnum;e++)t.push(this.createOneBullet());if(this.BulletProperty.bullettype==y.FIREWORKS){var l=t[0].BulletProperty.getcopyfromself();if(l.xspeed=l.xspeed/2,t[0].BulletProperty=l,null!=t[1]){var o=t[1].BulletProperty.getcopyfromself();o.xspeed=-o.xspeed/2,t[1].BulletProperty=o,t[1].node.setRotationFromEuler(0,0,90)}if(null!=t[2]){var r=t[1].BulletProperty.getcopyfromself();r.xspeed=0,t[2].BulletProperty=r,t[2].node.setRotationFromEuler(0,0,40)}}}},o.createOneBullet=function(){this.BulletProperty.startpos=this.getstartpos(),this.BulletProperty.bullettype==y.APPLE&&(console.log("startpos"),console.log(this.BulletProperty.startpos));var t=this.owner.getenemybytargettype(this.BulletProperty.targettype),e=this.pool.alloc(),l=e.getComponent(a);(this.bulletid++,l.initself(t,this.BulletProperty,this.owner.enemymange,this.bulletid),null==e.parent&&this.bulletmange.addChild(e),e.once(c.onBulletDie,this.onBulletDie,this),e.active=!0,this.BulletProperty.bosswx>0)&&(console.log("BulletProperty"),console.log(this.BulletProperty.bullettype),e.getComponent(s.Skeleton).setAnimation(0,h(this.BulletProperty.bosswx),!0));return l},o.getstartpos=function(){switch(this.BulletProperty.bullettype){case y.BOOMERANG:this.BulletProperty.startpos.x=B(-360,360);break;case y.LOTUSFLOWER:case y.BOMB:case y.APPLE:var t=B(-260,260);this.BulletProperty.startpos.x+=t;var e=B(100,500);this.BulletProperty.startpos.y+=e;case y.LIGHTNING:this.BulletProperty.startpos.y+=this.BulletProperty.boombrange+20}return this.BulletProperty.startpos},o.onBulletDie=function(t){t.active=!1,this.pool.free(t)},l}(i))||b);l._RF.pop()}}}));

System.register("chunks:///_virtual/BulletProperty.ts",["cc","./itemenum.ts","./commonfunctiond.ts"],(function(t){var e,s,i,a,h,n;return{setters:[function(t){e=t.cclegacy,s=t.Vec2},function(t){i=t.ITEMEFFECT,a=t.ITEMTYPE,h=t.TARGETTYPE},function(t){n=t.calculateSpeed}],execute:function(){e._RF.push({},"30dbdi9XONM+7+jxeAuAEbW","BulletProperty",void 0);t("BulletProperty",function(){function t(){this.bullettype=a.NOMAL,this.targettype=h.TARGET_NONE,this.art=10,this.penetratenum=1,this.traceBullet=!1,this.limitdis=600,this.bulletcd=3,this.xspeed=60,this.yspeed=60,this.startpos=new s(0,0),this.bulleticonname=void 0,this.isrotate=0,this.statetime=0,this.boombrange=0,this.maxhp=0,this.gethp=0,this.minspeed=0,this.hasstop=0,this.poison=0,this.criticalstrike=0,this.bossadd=void 0,this.bosswx=void 0}var e=t.prototype;return e.getdatafromitemdata=function(t){if(this.bullettype=t.itemtype,this.art=t.attr,this.penetratenum=t.penetratenum,this.limitdis=t.dis,this.bulletcd=t.cd,this.bulleticonname=t.bulleticonname,this.statetime=t.statetime,this.boombrange=t.boombrange,this.maxhp=t.maxhp,this.targettype=t.target,this.isrotate=t.isrotate,this.getspeedfromitemdata(t),t.specialtype>0)switch(t.specialtype){case i.EFFECT_VAMPIRISM:this.gethp=t.specialnum;break;case i.EFFECT_SLOW:this.minspeed=t.specialnum;break;case i.EFFECT_STOP:this.hasstop=t.specialnum;break;case i.EFFECT_POISON:this.poison=t.specialnum;break;case i.EFFECT_CRIT:this.criticalstrike=t.specialnum}},e.getspeedfromitemdata=function(t){var e=n(t.basespeed,t.agility,5,Math.E,10);switch(t.itemtype){case a.BOOMERANG:case a.BOSSSKILLTYPE:this.xspeed=0,this.yspeed=e;break;case a.WATREBULLET:case a.LOTUSFLOWER:case a.BOMB:case a.APPLE:this.xspeed=0,this.yspeed=0;break;default:this.xspeed=e,this.yspeed=e}},e.getcopyfromself=function(){var e=new t;return e.bullettype=this.bullettype,e.art=this.art,e.penetratenum=this.penetratenum,e.traceBullet=this.traceBullet,e.limitdis=this.limitdis,e.bulletcd=this.bulletcd,e.xspeed=this.xspeed,e.yspeed=this.yspeed,e.startpos=this.startpos,e.bulleticonname=this.bulleticonname,e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/bulletzhua.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletProperty.ts","./evenenum.ts","./commonfunctiond.ts","./ConfigData.ts","./bossmange.ts","./timecountdown.ts"],(function(t){var e,n,i,o,s,r,a,l,u,h,d,c,p,f,m,b,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,l=t.BoxCollider2D,u=t.Vec2,h=t.Collider2D,d=t.Contact2DType,c=t.Component},function(t){p=t.BulletProperty},function(t){f=t.EVENTS},function(t){m=t.isoutofscreen},function(t){b=t.ConfigData},function(t){g=t.bossmange},function(t){y=t.timecountdown}],execute:function(){var v,C,B,w,P,D,z;s._RF.push({},"6ff213iCB1BNbl80ktSD4w6","bulletzhua",void 0);var N=r.ccclass,x=r.property,M=b.getInstance();t("bulletzhua",(v=N("bulletzhua"),C=x(a),B=x(a),v((D=e((P=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).BulletProperty=new p,e.collider=null,e.target=null,e.rotate=0,e.nowpennum=1,e.currenthp=100,e.bulletid=void 0,e.nowangle=void 0,e.isrun=void 0,e.rotatespeed=void 0,i(e,"bossmange",D,o(e)),i(e,"timecountnode",z,o(e)),e}n(e,t);var s=e.prototype;return s.start=function(){var t=this;this.rotatespeed=60;var e=M.getitemdata(10101),n=new p;n.getdatafromitemdata(e),this.initself(null,n,10101),this.timecountnode.on(f.OnTimeCountdown,(function(){t.onhuntbossaild()}))},s.initself=function(t,e,n){this.isrun=!1,this.nowangle=-Math.PI/2,this.bulletid=n,this.target=t,this.BulletProperty=e,this.nowpennum=e.penetratenum,this.currenthp=e.maxhp,this.addCollisionListener(),this.node.getComponent(l).enabled=!0},s.update=function(t){if(m(this.node))this.onhuntbossaild();else{var e=this.node.getPosition(),n=new u(e.x,e.y);if(u.distance(this.BulletProperty.startpos,n)>=this.BulletProperty.limitdis)this.onhuntbossaild();else{if(this.isrun){var i=Math.abs(this.node.angle*Math.PI/180),o=Math.sin(i),s=Math.cos(i);this.rotate<0&&(o=-o),this.node.setPosition(this.node.position.x+t*this.BulletProperty.xspeed*o,this.node.position.y-t*this.BulletProperty.yspeed*s)}this.isrun||(this.rotate=this.rotate+this.rotatespeed*t,this.rotate>55&&(this.rotatespeed=-this.rotatespeed,this.rotate=55),this.rotate<-55&&(this.rotatespeed=-this.rotatespeed,this.rotate=-55),this.node.setRotationFromEuler(0,0,this.rotate))}}},s.addCollisionListener=function(){var t=this.node.getComponent(h);null!=t&&t.on(d.BEGIN_CONTACT,this.onhuntboss,this)},s.onDestroy=function(){},s.onhuntboss=function(t,e,n){this.isrun&&(this.isrun=!1,16!=e.group?e.node.emit(f.OnHuntBoss,this.BulletProperty.art,this.node):this.onhuntbossaild())},s.onhuntbossaild=function(){this.bossmange.getComponent(g).onhuntbossfaild()},s.onstartcountdown=function(t){this.timecountnode.getChildByName("timelabel").getComponent(y).initself(10+5*(t-1)),this.timecountnode.active=!0,this.node.parent.active=!0},s.runzhua=function(){this.timecountnode.getChildByName("timelabel").getComponent(y).stopself(),this.timecountnode.active=!1,this.isrun=!0},e}(c)).prototype,"bossmange",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(P.prototype,"timecountnode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/closeself.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,s,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,s=e._decorator,n=e.Component}],execute:function(){var c;o._RF.push({},"8efd92DXA5GS4BeWmNR2zV6","closeself",void 0);var r=s.ccclass;s.property,e("closeself",r("closeself")(c=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var s=o.prototype;return s.start=function(){},s.update=function(e){},s.closeself=function(){this.node.destroy()},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/Coin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./evenenum.ts","./index.ts","./commonfunctiond.ts"],(function(n){var t,e,i,o,s,d,a,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.Vec2,s=n.Component},function(n){d=n.EVENTS},function(n){a=n.changeAnimateClip},function(n){c=n.getcoinAnimate}],execute:function(){var r;e._RF.push({},"2a5eaWhUL9FHqR1Kn9DrxBg","Coin",void 0);var u=i.ccclass;i.property,n("Coin",u("Coin")(r=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).desnode=null,t.delaytime=0,t.anglenumx=0,t.anglenumy=0,t}t(e,n);var i=e.prototype;return i.start=function(){},i.oninit=function(n,t,e,i){this.delaytime=0,this.node.setPosition(n,t),this.setdesnode(i),a(this.node,c(e))},i.update=function(n){this.delaytime+=n,this.delaytime<.5||(this.node.setPosition(this.node.position.x+600*n*this.anglenumx,this.node.position.y+600*n*this.anglenumy),null!=this.desnode&&this.node.getWorldPosition().y+20>=this.desnode.getWorldPosition().y&&this.node.emit(d.onCoinDie,this.node))},i.setdesnode=function(n){this.desnode=n;var t=this.desnode.getWorldPosition(),e=new o(t.x,t.y),i=this.node.getWorldPosition(),s=new o(i.x,i.y),d=e.subtract(s).angle(new o(1,0));this.anglenumx=Math.cos(d),this.anglenumy=Math.sin(d)},e}(s))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/CoinEmitter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./evenenum.ts","./Coin.ts"],(function(t){var n,i,o,e,r,c,s,a,l,u,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,s=t.Prefab,a=t.Pool,l=t.instantiate,u=t.Component},function(t){p=t.EVENTS},function(t){f=t.Coin}],execute:function(){var h,v,d,C,m;r._RF.push({},"78dbbSVsXZHv4PsF8Hn1Aht","CoinEmitter",void 0);var y=c.ccclass,b=c.property;t("CoinEmitter",(h=y("CoinEmitter"),v=b(s),h((m=n((C=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,o(n,"coinPrefab",m,e(n)),n.pool=null,n.iconlist=void 0,n}i(n,t);var r=n.prototype;return r.start=function(){var t=this;this.pool=new a((function(){return l(t.coinPrefab)}),100,(function(t){t.removeFromParent()}))},r.onDestroy=function(){this.pool.destroy()},r.setcoinnodelist=function(t){this.iconlist=t},r.createdrop=function(t,n,i){var o=this.pool.alloc();this.node.addChild(o),o.getComponent(f).oninit(n,i,t,this.iconlist.get(t)),o.once(p.onCoinDie,this.onCoinDie,this),o.active=!0},r.onCoinDie=function(t){t.active=!1,this.pool.free(t)},n}(u)).prototype,"coinPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/commonfunctiond.ts",["./rollupPluginModLoBabelHelpers.js","cc","./itemenum.ts","./Global.ts","./ConfigData.ts"],(function(e){var t,r,n,a,o,i,c,u,s,f,l,I,E;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e.Vec2,a=e.resources,o=e.ImageAsset,i=e.SpriteFrame},function(e){c=e.ITEMQULITY,u=e.ITEMEFFECT,s=e.COINTYPE,f=e.ITEMTYPE,l=e.WX_TYPE},function(e){I=e.gameConfig},function(e){E=e.ConfigData}],execute:function(){e({GetItemName:function(e,t){return"<color="+h(t)+">"+e+"</color>"},GetItemNameLevel:function(e,t,r){return"<color="+h(r)+">"+e+":"+t+"级</color>"},GetItemcolor:h,MoveByDirection:function(e,t){var r=new n(t.position.x,t.position.y),a=new n(e.position.x,e.position.y);return r.subtract(a).normalize()},SetSpriteImage:function(e,t){a.load(e,o,(function(e,r){if(e)return console.log("Load itemicon fail");t.spriteFrame=i.createWithImage(r)}))},calculateExperienceToLevelUp:function(e,t,r,n,a){if(e<1||t<=0||r<=0||n<=0||a<1)throw new Error("Invalid parameters");var o=Math.pow(e,r),i=Math.min(1,(e-1)/(a-1));i>0&&(o*=Math.pow(1+n*i,i));return Math.floor(t*o)},calculateHealth:function(e,t,r,n){if(e<1||t<=0||r<=0||n<=0)throw new Error("Invalid parameters");var a=Math.pow(1+r*(1-Math.pow(n,e)),e),o=t*a;return Math.floor(o)},calculateSpeed:function(e,t,r,n,a){if(t<=0)throw new Error("Agility must be greater than 0.");var o=Math.log(t+1)/Math.log(n);return e+r*o/(1+o/a)},circlemove:function(e,t,r,n,a,o){var i=-Math.PI/2,c=Math.PI/2,u=e+(c-i)*t/100,s=r+a*Math.cos(u),f=n+a*Math.sin(u);return o.setPosition(s,f),u},getRandomFloat:function(e,t){return Math.random()*(t-e)+e},getRandomInt:g,getRandomString:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,a=0;a<e;a++)t+=r.charAt(g(0,n-1));return t},getanimationnamebywx:function(e){switch(e){case l.WX_JIN:return"powder";case l.WX_MU:return"green";case l.WX_HUO:return"red";case l.WX_TU:return"yellow";default:return"blue"}},getbossid:function(e,t,r){return r+10*t+1e3*e},getbosslevelbyid:function(e){return Math.floor(e/1e3)},getbossskillid:function(e,t){return 1e3*e+100*t+1},getbossskillname:function(e){var t=m.getitemdata(e);if(null!=t)return t.itemname;return""},getbosstypebyid:function(e){return Math.floor(e%1e3/10)},getbosswxbyid:function(e){return e%10},getcoinAnimate:function(e){switch(e){case s.COINTYPE_LINSHI:return"lingshi";case s.COINTYPE_SBEAST:return"spiritbeast";default:return"money"}},getcoinicon:function(e){switch(e){case s.COINTYPE_LINSHI:return"atlas/coins/l1";case s.COINTYPE_SBEAST:return"atlas/coins/s1";default:return"atlas/coins/icon_gold"}},getconcolorchar:function(e,t){var r="FC0303";t>=e&&(r="03FC3F");return"<color="+r+">"+t+"/"+e+"</color>"},getitembyweight:function(e){var r=0;e.forEach((function(e,t,n){r+=e}));for(var n,a=g(1,r),o=0,i=1,c=t(e);!(n=c()).done;){var u=n.value,s=u[0],f=u[1],l=o;o+=f,a>l&&a<=o&&(i=s)}return i},getitemtypename:function(e){switch(e){case f.FIRE:return"火炮";case f.BOOMERANG:return"斧头";case f.FIREWORKS:return"弩";case f.SWORD:return"匕首";case f.LOTUSFLOWER:return"莲座";case f.BOMB:return"炸弹";case f.LIGHTNING:return"闪电";case f.WATREBULLET:return"治疗石";case f.APPLE:return"盾牌";case f.BOSSCAGE:return"捕兽笼";default:return""}},getothersattribite:function(e,t){var r="";switch(e){case u.EFFECT_VAMPIRISM:r="吸血："+t+"%";break;case u.EFFECT_SLOW:r="减速："+t+"秒";break;case u.EFFECT_STOP:r="定身："+t+"秒";break;case u.EFFECT_POISON:r="有毒，中毒后伤血："+t+"%";break;case u.EFFECT_CRIT:r="暴击伤害："+t+"%"}return r},getrandomitem:function(e){var r=0,n=new Map;e.forEach((function(e,t,n){r+=e}));for(var a,o=g(1,r),i=0,c=1,u=t(e);!(a=u()).done;){var s=a.value,f=s[0],l=s[1],I=i;i+=l,o>I&&o<=i?c=f:n.set(f,l)}return{itemtype:c,newlist:n}},getspecialnumbytype:function(e){var t=g(1,5);e!=u.EFFECT_VAMPIRISM&&e!=u.EFFECT_POISON||g(1,20);e==u.EFFECT_CRIT&&g(100,200);return t},getwxaddrate:function(e,t){if(e==l.WX_JIN&&t==l.WX_MU)return 30;if(e==l.WX_MU&&t==l.WX_TU)return 25;if(e==l.WX_TU&&t==l.WX_SHUI)return 20;if(e==l.WX_SHUI&&t==l.WX_HUO)return 35;if(e==l.WX_HUO&&t==l.WX_JIN)return 25;return 0},getwxname:function(e){switch(e){case l.WX_JIN:return"金";case l.WX_MU:return"木";case l.WX_SHUI:return"水";case l.WX_HUO:return"火";case l.WX_TU:return"土";default:return""}},isoutofscreen:function(e){var t=I.mapWidth/2,r=I.mapHeight/2;if(e.position.x>t||e.position.x<-t)return!0;if(e.position.y>r||e.position.y<-r)return!0;return!1}}),r._RF.push({},"48722gqO8pGsrKvYghyrfVb","commonfunctiond",void 0);var m=E.getInstance();function g(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function h(e){var t="FFFFFF";switch(e){case c.QULITY_WIHTE:t="FCF8FB";break;case c.QULITY_BULE:t="032BFC";break;case c.QULITY_GREEN:t="1A7E01";break;case c.QULITY_PURPLE:t="772DFA";break;case c.QULITY_GOLD:t="CF7503";break;case c.QULITY_RED:t="FC0303";break;case c.QULITY_YELLOW:t="F5F52A";break;case c.QULITY_BRIBLUE:t="2ADDF5";break;case c.QULITY_COLOR:t="EE12D5"}return t}r._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigData.ts",["cc","./commonfunctiond.ts","./Global.ts"],(function(e){var t,o,a,n,i,s,l;return{setters:[function(e){t=e.cclegacy,o=e._decorator,a=e.resources,n=e.JsonAsset},function(e){i=e.calculateExperienceToLevelUp,s=e.calculateHealth},function(e){l=e.gameConfig}],execute:function(){var r,c;t._RF.push({},"35bf7iLV1lFRaE+kx5qbHZn","ConfigData",void 0);var u=o.ccclass;o.property,e("ConfigData",u("ConfigData")(((c=function(){function e(){this.itemboxcfg=new Map,this.itemlist=new Map,this.enemyconflist=new Map,this.bossconflist=new Map,this.stagelist=new Map,this.playerlevel=new Map,this.boxinf=new Map,this.loadresult=[],this.maxconfnum=8}e.getInstance=function(){return e._instance||(e._instance=new e),e._instance};var t=e.prototype;return t.start=function(){var e=this;a.load("configdata/BoxData",n,(function(t,o){t?console.error(t):(o.json.BoxData.forEach((function(t){var o=e.itemboxcfg.get(t.Boxlevel);if(null!=o)o.itemlist.set(t.Itemid,t.Itemweight),o.itemtotalweight+=t.Itemweight;else{var a={itemlist:new Map,bigpriceid:0,bigpriceweight:0,bigaddweight:0,basenum:0,itemtotalweight:t.Itemweight};a.itemlist.set(t.Itemid,t.Itemweight),e.itemboxcfg.set(t.Boxlevel,a)}})),e.loadresult.push("BoxData"),console.log("configdata/BoxData 加载完毕"))})),a.load("configdata/BoxDataBig",n,(function(t,o){t?console.error(t):(o.json.BoxDataBig.forEach((function(t){var o=e.itemboxcfg.get(t.Boxlevel);null!=o?(o.bigpriceid=t.Priceid,o.bigpriceweight=t.Priceweight,o.bigaddweight=t.Priceadd,o.basenum=t.pricebasenum,o.itemtotalweight+=t.Priceweight):(console.log("加载了错误的大奖数据"),console.log(t.Boxlevel))})),e.loadresult.push("BoxDataBig"),console.log("configdata/BoxDataBig 加载完毕"))})),a.load("configdata/ItemData",n,(function(t,o){t?console.error(t):(o.json.ItemData.forEach((function(t){var o={disclosere:new Map,itemid:t.ID,itemtype:t.itemtype,itemname:t.itemname,qulity:t.qulity,itemlevel:t.itemlevel,target:t.target,attr:t.attr,dis:t.dis,agility:t.agility,penetratenum:t.penetratenum,specialtype:t.specialtype,specialnum:t.specialnum,cd:t.cd,basespeed:t.basespeed,bulletnum:t.bulletnum,statetime:t.statetime,boombrange:t.boombrange,maxhp:t.maxhp,iconname:t.iconname,bulleticonname:t.bulleticonname,isrotate:t.isrotate,itemdes:t.itemdes,fightpower:t.fightpower};null==o.bulleticonname&&(o.bulleticonname=""),t.discloseretype.forEach((function(e,a){o.disclosere.set(e,t.discloserenum[a])})),e.itemlist.set(t.ID,o)})),e.loadresult.push("ItemData"),console.log("configdata/ItemData 加载完毕"))})),a.load("configdata/EnemyData",n,(function(t,o){t?console.error(t):(o.json.EnemyData.forEach((function(t){var o={ID:t.ID,name:t.name,group:t.group,enemySpeed:t.enemySpeed,score:t.score,atk:t.atk,hp:t.hp,probability:t.probability,showTime:t.showTime,hurtrate:t.hurtrate,hurtnum:t.hurtnum,tag:t.tag,dropexp:t.dropexp,droplist:new Map,wxpro:t.wxpro,atkcd:1};t.droptype.forEach((function(e,a){o.droplist.set(e,t.dropnum[a])})),e.enemyconflist.set(t.ID,o)})),e.loadresult.push("EnemyData"),console.log("configdata/EnemyData 加载完毕"))})),a.load("configdata/BossData",n,(function(t,o){t?console.error(t):(o.json.BossData.forEach((function(t){var o={ID:t.ID,showname:t.showname,qulity:t.qulity,name:t.name,enemySpeed:t.enemySpeed,atk:t.atk,atktime:t.atktime,hp:t.hp,probability:0,hurtrate:t.hurtrate,hurtnum:t.hurtnum,tag:t.tag,droplist:new Map,uiurl:t.uiurl,bosslevel:t.bosslevel,bossskill:t.bossskill,starlevel:t.starlevel};t.droptype.forEach((function(e,a){o.droplist.set(e,t.dropnum[a])})),e.bossconflist.set(o.ID,o)})),e.loadresult.push("BossData"),console.log("configdata/BossData 加载完毕"))})),a.load("configdata/StageData",n,(function(t,o){t?console.error(t):(o.json.StageData.forEach((function(t){var o={ID:t.ID,enemylist:new Map,bosslist:new Map};t.enemylist.forEach((function(e,a){o.enemylist.set(e,t.enemypro[a])})),t.bosslist.forEach((function(e,a){o.bosslist.set(e,t.bosspro[a])})),e.stagelist.set(o.ID,o)})),e.loadresult.push("StageData"),console.log("configdata/StageData 加载完毕"))})),a.load("configdata/Player",n,(function(t,o){if(t)console.error(t);else{var a=0;o.json.Player.forEach((function(t){var o={level:t.level,maxexp:0,maxhp:0,def:t.def,levelname:t.levelname};o.maxexp=i(o.level,l.baseExperience,l.growthFactor,l.steepness,l.transitionPoint),o.maxhp=s(o.level,l.baseHealth,l.HealthgrowthFactor,l.smoothnessFactor)+a,a=o.maxhp,e.playerlevel.set(o.level,o),console.log("人物升级所需经验"+o.maxexp+",人物血量 "+o.maxhp)})),e.loadresult.push("Player"),console.log("configdata/Player 加载完毕")}})),a.load("configdata/BoxInf",n,(function(t,o){t?console.error(t):(o.json.BoxInf.forEach((function(t){var o={boxlevel:t.boxlevel,getcost:t.getcost,lupcost:new Map,lupbosslevel:t.lupbosslevel,itemqulityrate:new Map};t.lupcosttype.forEach((function(e,a){o.lupcost.set(e,t.lupcostnum[a])})),t.itemqulity.forEach((function(e,a){o.itemqulityrate.set(e,t.itemqulityrate[a])})),e.boxinf.set(o.boxlevel,o)})),e.loadresult.push("BoxInf"),console.log("configdata/BoxInf 加载完毕"))}))},t.update=function(e){},t.getitemboxcfg=function(e){return this.itemboxcfg.get(e)},t.getitemdata=function(e){return this.itemlist.get(e)},t.getenemydata=function(e){return this.enemyconflist.get(e)},t.getbossdatacfg=function(e){return this.bossconflist.get(e)},t.getstagedata=function(e){return this.stagelist.get(e)},t.getplayerdata=function(e){return this.playerlevel.get(e)},t.getboxinf=function(e){return this.boxinf.get(e)},t.isoverload=function(){return!(this.loadresult.length<this.maxconfnum)},t.getbosslist=function(){return this.bossconflist},e}())._instance=null,r=c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/enemy.ts",["cc","./index.ts","./bullet.ts","./Global.ts","./evenenum.ts"],(function(e){var n,o,t,i,r,u,s,l,a;return{setters:[function(e){n=e.cclegacy,o=e.CircleCollider2D,t=e.Vec2,i=e.Sprite,r=e.Color},function(e){u=e.addCollisionListener},function(e){s=e.bullet},function(e){l=e.gameConfig},function(e){a=e.EVENTS}],execute:function(){e({addBossCollisionListener:function(e,n,o,t){u(e,(function(n,o){if(8==o.group){o.node.getComponent(s).BulletProperty.traceBullet;if(c.indexOf(o.group)>-1)return e.getComponent(i).color=new r(220,55,55),void t.scheduleOnce((function(){e.getComponent(i).color=new r(255,255,255)}),.1)}2!=o.group||e.emit(a.OnHurtPlayer)}))},addEnemyCollisionListener:function(e,n,o){u(e,(function(n,t){if(8==t.group){var u=t.node.getComponent(s);if(null!=u){u.BulletProperty.traceBullet;if(c.indexOf(t.group)>-1)return t.group,e.getComponent(i).color=new r(220,55,55),void o.scheduleOnce((function(){e.getComponent(i).color=new r(255,255,255)}),.1)}}2!=t.group?64!=t.group||e.emit(a.OnEnemyDie):e.emit(a.OnHurtPlayer)}))},findHero:function(e,n,i){var r=n;e.position.x>l.mapWidth/2||e.position.x<-l.mapWidth/2||e.position.y>l.mapHeight/2||e.position.y<-l.mapHeight/2?e.getComponent(o).enabled=!1:e.getComponent(o).enabled=!0;var u=e.getParent().getParent().getChildByName("player").position,s=e.position,a=new t(u.x,u.y),c=new t(s.x,s.y),p=a.subtract(c).angle(new t(1,0));s.x<=u.x?e.setRotationFromEuler(0,0,0):e.setRotationFromEuler(0,180,0);e.setPosition(s.x+r*i*Math.cos(p),s.y),s.y<u.y?e.setPosition(s.x,s.y+n*i*Math.sin(p)):e.setPosition(s.x,s.y-n*i*Math.sin(p))},sendMessageToAddEnemyDieCount:function(e){},sendMessageToDmageCount:function(e,n){}}),n._RF.push({},"644c9QcKoVJFJY+Z6LYgkfP","enemy",void 0);e("damageLabel","0");var c=[8,16,256];n._RF.pop()}}}));

System.register("chunks:///_virtual/Enemymange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./time.ts","./itemenum.ts","./commonfunctiond.ts","./ConfigData.ts","./evenenum.ts","./Player.ts"],(function(e){var t,n,i,o,r,s,a,l,u,h,c,m,d,p,y,f,g,b,C,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,a=e._decorator,l=e.Prefab,u=e.Node,h=e.instantiate,c=e.CircleCollider2D,m=e.Vec2,d=e.Component},function(e){p=e.gameConfig},function(e){y=e.time},function(e){f=e.TARGETTYPE},function(e){g=e.getRandomInt},function(e){b=e.ConfigData},function(e){C=e.EVENTS},function(e){v=e.Player}],execute:function(){var E,B,x,I,W,P,A,T,w,M,D,L,R;s._RF.push({},"d9085UrnOVB7pBfVvRmxbwY","Enemymange",void 0);var z=a.ccclass,N=a.property,O=b.getInstance();e("Enemymange",(E=z("Enemymange"),B=N(l),x=N(l),I=N(l),W=N(u),P=N(u),E((w=t((T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"groupA",w,o(t)),i(t,"groupB",M,o(t)),i(t,"groupHit",D,o(t)),i(t,"playernode",L,o(t)),i(t,"timenode",R,o(t)),t.thisWillBeCreatedEnemyInfo=void 0,t.thisWillBeCreatedEnemyGB=void 0,t.maxEnemyLimit=70,t.tagList=[],t.isinstop=!1,t.enemylist=[],t}n(t,e);var s=t.prototype;return s.start=function(){this.node.on(C.OnEnemyDrop,this.playergetcoin,this)},s.oninitenemy=function(e){this.isinstop=!1,this.onsetenemylist(e),this.thisWillBeCreatedEnemyGB=O.getenemydata(1),this.realCreateEnemy()},s.onsetenemylist=function(e){this.enemylist=e},s.destoryAllChildNode=function(){for(var e,t=r(this.node.children);!(e=t()).done;){e.value.destroy()}},s.createOneEnemy=function(){var e=this,t=[],n=this.timenode.getComponent(y).time;if(this.enemylist.forEach((function(i,o,r){i.showTime[0]<=n&&n<=i.showTime[1]&&-1==e.tagList.indexOf(i.name)&&t.push(i)})),t.length>0){var i=t.reduce((function(e,t){return e+t.probability}),0),o=Math.random()*i,r=t.sort((function(e,t){return e.probability-t.probability}));r.reduce((function(e,t){return t.maxValue=e+t.probability,t.maxValue}),0),this.thisWillBeCreatedEnemyInfo=r.find((function(e){return e.maxValue>o}));var s=this.thisWillBeCreatedEnemyInfo.group;return this.thisWillBeCreatedEnemyInfo.tag&&"boss"==this.thisWillBeCreatedEnemyInfo.tag&&this.tagList.push(this.thisWillBeCreatedEnemyInfo.name),n<0&&(this.thisWillBeCreatedEnemyInfo.needColor=!0),h(this[s])}return this.thisWillBeCreatedEnemyInfo=this.enemylist[0],n<0&&(this.thisWillBeCreatedEnemyInfo.needColor=!0),h(this.groupA)},s.realCreateEnemy=function(){if(!this.isinstop){var e=this.createOneEnemy();e.setParent(this.node),e.getComponent(c).enabled=!0;var t=Math.ceil(2*Math.random()),n=p.mapWidth/2-50;1==t&&e.setPosition(g(1,n),640),2==t&&e.setPosition(-g(1,n),640)}},s.createEnemy=function(e){var t=this;this.unscheduleAllCallbacks(),this.schedule((function(){t.node.children.length>=t.maxEnemyLimit||t.realCreateEnemy()}),e)},s.getenemynum=function(){return this.node.children.length},s.getenemybydistance=function(e){for(var t,n=0,i=null,o=r(this.node.children);!(t=o()).done;){var s=t.value,a=new m(s.position.x,s.position.y),l=m.distance(a,e);(0==n||l<n)&&(n=l,i=s)}return i},s.getminiyenemy=function(){for(var e,t=0,n=null,i=r(this.node.children);!(e=i()).done;){var o=e.value;(0==t||t<o.position.y)&&(t=o.position.y,n=o)}return n},s.getenemybyType=function(e){var t=null;switch(e){case f.TARGET_MIN:t=this.getminiyenemy();break;case f.TARGET_RANDOM:var n=this.node.children.length-1,i=g(0,n);t=this.node.children[i]}return t},s.getrangeenemy=function(e,t){for(var n,i=[],o=r(this.node.children);!(n=o()).done;){var s=n.value;s.position.x<e.x+t&&s.position.x>e.x-t&&s.position.y<e.y+t&&s.position.y>e.y-t&&i.push(s)}return i},s.playergetcoin=function(e,t,n){this.playernode.getComponent(v).getcoinlistbyposition(e,t,n.droplist),n.dropexp>0&&this.playernode.getComponent(v).onchangeplayerexp(n.dropexp)},s.stopenemys=function(){this.destoryAllChildNode(),this.isinstop=!0},s.restartenemys=function(){this.isinstop=!1},s.onplayerdie=function(){return this.isinstop=!0,this.unscheduleAllCallbacks(),this.destoryAllChildNode(),this.timenode.getComponent(y).onstop()},s.createnumberenemys=function(){if(!this.isinstop){var e=Math.ceil(2*Math.random()),t=p.mapWidth/2-50,n=g(1,t);2==e&&(n=-g(1,t));for(var i=640,o=n,r=1;r<10;r++){var s=h(this.groupB);s.setParent(this.node),s.getComponent(c).enabled=!0,s.setPosition(o,i),o+=50,r%3==0&&(i+=50,o=n)}}},s.createcurenemys=function(e){this.thisWillBeCreatedEnemyInfo=O.getenemydata(e);var t=this.thisWillBeCreatedEnemyInfo.group,n=h(this[t]);n.setParent(this.node),n.getComponent(c).enabled=!0;var i=Math.ceil(2*Math.random()),o=p.mapWidth/2-50;1==i&&n.setPosition(g(1,o),640),2==i&&n.setPosition(-g(1,o),640)},t}(d)).prototype,"groupA",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(T.prototype,"groupB",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"groupHit",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"playernode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(T.prototype,"timenode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=T))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/evenenum.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"7b920MJVlNB/5YxdxkjC4GN","evenenum",void 0);n("EVENTS",function(n){return n.OnDie="onDie",n.onBulletDie="onBulletDie",n.OnSellItem="onsellitem",n.OnChangeItem="onchangeitem",n.OnEnemyChangeHp="onenemychangehp",n.OnBulletChangeHp="onbulletchangehp",n.OnEnemyRunning="onenemyrunning",n.onCoinDie="onCoinDie",n.OnEnemyDrop="onenemydrop",n.OnBossDie="onbossdie",n.OnplayerAddExp="onplayeraddexp",n.OnHuntBoss="onhuntboss",n.OnHurtPlayer="onhurtplayer",n.OnBoxLevelUpdate="onboxlevelupdate",n.OnChooseItem="onchooseitem",n.OnCommonChangeHp="oncommonchangehp",n.OnEnemyDie="onenemydie",n.OnTimeCountdown="ontimecountdown",n}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventMange.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var c,i;t._RF.push({},"75c9f5wlMhGBLJTEhN2Vtdy","EventMange",void 0);var a=n.ccclass;n.property,e("default",a("EventMange")(((i=function(){function e(){this.eventDic=new Map}e.getInstance=function(){return e._instance||(e._instance=new e),e._instance};var t=e.prototype;return t.onevent=function(e,t,n){this.eventDic.has(e)?this.eventDic.get(e).push({eventfunc:t,ctx:n}):this.eventDic.set(e,[{eventfunc:t,ctx:n}])},t.offevent=function(e,t){if(this.eventDic.has(e)){var n=this.eventDic.get(e).findIndex((function(e){return e.eventfunc==t}));n>-1&&this.eventDic.get(e).splice(n,1)}},t.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];this.eventDic.has(e)&&this.eventDic.get(e).forEach((function(e){var t=e.eventfunc,c=e.ctx;c?t.apply(c,n):t.apply(void 0,n)}))},t.clear=function(){this.eventDic.clear()},e}())._instance=null,c=i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/fire.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fireControl.ts"],(function(t){var e,i,o,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,n=t.Component},function(t){s=t.fireControl}],execute:function(){var r;i._RF.push({},"435a3n8mrVFF5HwGS+rYNZ+","fire",void 0);var h=o.ccclass;o.property,t("fire",h("fire")(r=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).fireInfo={},e.dirX=Math.random()>.5?1:-1,e.dirY=Math.random()>.5?1:-1,e.spX=Math.random(),e.spY=Math.random(),e.destroytime=1,e.bebig=0,e}e(i,t);var o=i.prototype;return o.start=function(){var t=this;this.fireInfo=Object.assign({},this.node.getParent().getComponent(s).fireInfo),this.destroytime=this.fireInfo.destroy,this.bebig=this.fireInfo.bebig,this.bebig>0&&this.schedule((function(){t.node.setScale(1.5,1.5,1.5)}),this.destroytime/this.bebig,this.bebig-1),this.scheduleOnce((function(){t.node.destroy()}),this.destroytime)},o.update=function(t){this.fireInfo.isSuper&&(this.node.setScale(1.5,1.5,1.5),this.node.setPosition(this.node.position.x+this.dirX*t*this.spX*1e3,this.node.position.y+this.dirY*t*this.spY*1e3))},i}(n))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/fireControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts"],(function(e){var t,r,i,n,o,a,s,c,f,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.instantiate,f=e.Component},function(e){u=e.playAudio}],execute:function(){var l,h,p,P,d,b,y;o._RF.push({},"56b6cjAEGVETq+oTv+iZ5I4","fireControl",void 0);var v=a.ccclass,g=a.property;e("fireControl",(l=v("fireControl"),h=g(s),p=g(s),l((b=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"firePrefab",b,n(t)),i(t,"swordPrefab",y,n(t)),t.fireInfo={createDt:1,isSuper:!1,atk:10,destroy:2,bebig:3},t.createFireTimer=null,t}r(t,e);var o=t.prototype;return o.start=function(){this.createFireTimer=this.createFire},o.createFire=function(e){var t=c(this.firePrefab);t.setParent(this.node);var r=e.getPosition();t.setPosition(r.x,r.y)},o.beginCreaterFireTimer=function(){this.schedule(this.createFireTimer,this.fireInfo.createDt)},o.updateFireDT=function(e,t,r){t<=9?(this.fireInfo.createDt-=e,this.fireInfo.createDt<.1&&(this.fireInfo.createDt=.1),this.unschedule(this.createFireTimer),this.beginCreaterFireTimer()):(u("获得超武"),this.fireInfo.createDt=1,this.fireInfo.isSuper=!0,this.unscheduleAllCallbacks(),this.createSuperFire(r))},o.createSuperFire=function(e){var t=this;this.schedule((function(){for(var r=0;r<10;r++){var i=c(t.firePrefab);i.setParent(t.node);var n=e.getPosition();i.setPosition(n.x,n.y)}}),1)},o.createBigSword=function(e){var t=this;this.schedule((function(){var r=Math.ceil(4*Math.random()),i=e.getPosition(),n=c(t.swordPrefab);n.setParent(t.node.getParent()),1==r&&n.setPosition(i.x+100,i.y+250),2==r&&n.setPosition(i.x-100,i.y+250),3==r&&n.setPosition(i.x,i.y+350),4==r&&n.setPosition(i.x,i.y)}),.1)},t}(f)).prototype,"firePrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"swordPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=d))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameMange.ts",["cc","./ConfigData.ts"],(function(e){var t,n,a,s;return{setters:[function(e){t=e.cclegacy,n=e._decorator,a=e.sys},function(e){s=e.ConfigData}],execute:function(){var i,o;t._RF.push({},"28e25IpSDpNh4NMHlUn1iRh","GameMange",void 0);var r=n.ccclass,c=(n.property,s.getInstance());e("GameMange",r("GameMange")(((o=function(){function e(){this.isneedload=void 0,this.isgamestart=void 0,this.isnewgame=void 0}e.getInstance=function(){return e._instance||(e._instance=new e),e._instance};var t=e.prototype;return t.start=function(){c.start(),this.isneedload=!1,this.isgamestart=!1,this.isnewgame=!0;var e=a.localStorage.getItem("isnewgame");null!=e&&(console.log(e),this.isnewgame=!1)},t.update=function(e){},t.needload=function(){return this.isneedload},t.setgamestart=function(e){this.isgamestart=e,a.localStorage.setItem("isnewgame","1")},t.setneedload=function(e){this.isneedload=e},t.isready=function(){return!!c.isoverload()&&!!this.isgamestart},t.isnew=function(){return!0},e}())._instance=null,i=o))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts"],(function(e){var n,o,t,l;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,t=e.AudioSource},function(e){l=e.loadRemoteAudio}],execute:function(){e("getAllAudioScoure",(function(e){for(var o,r=function(){var e=o.value;l(encodeURI("https://"+e+".mp3")).then((function(n){if(n){var o=new t;o.clip=n,a[e]=o}else a[e]=null}))},s=n(e);!(o=s()).done;)r()})),o._RF.push({},"a1e82flkJFH6KS/9Vols1Yx","Global",void 0);e("myEnv",null);var a=e("gameConfig",{mapWidth:720,mapHeight:1280,gameBg:null,nowPass:1,gameMode:"endless",bannerAd:null,videoAd:null,insertAd:null,baseExperience:100,growthFactor:2.5,steepness:10,transitionPoint:20,baseHealth:10,HealthgrowthFactor:.2,smoothnessFactor:.95});o._RF.pop()}}}));

System.register("chunks:///_virtual/groupA.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enemy.ts","./index.ts","./Enemymange.ts","./evenenum.ts","./bullet.ts","./itemenum.ts","./commonfunctiond.ts"],(function(e){var n,t,i,o,s,h,r,u,d,l,a,c,p,m,y,f;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.CircleCollider2D,s=e.ProgressBar,h=e.Component},function(e){r=e.addEnemyCollisionListener,u=e.findHero},function(e){d=e.changeAnimateClip,l=e.playAudio},function(e){a=e.Enemymange},function(e){c=e.EVENTS},function(e){p=e.bullet},function(e){m=e.ITEMTYPE},function(e){y=e.isoutofscreen,f=e.getwxaddrate}],execute:function(){var g;t._RF.push({},"17587o5hxBH5KN2dJw1i5or","groupA",void 0);var b=i.ccclass;i.property,e("groupA",b("groupA")(g=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).enemyInfo=void 0,n.currenthp=0,n.maxhp=0,n.running=!0,n.currentspeed=void 0,n.playernode=void 0,n.bulletnode=void 0,n.bulletid=void 0,n.hurtnode=void 0,n}n(t,e);var i=t.prototype;return i.start=function(){var e=this,n=this.node.getParent().getComponent(a).thisWillBeCreatedEnemyInfo;this.enemyInfo=Object.assign({},n),this.playernode=this.node.getParent().getParent().getChildByName("player"),this.bulletid=-1,this.currenthp=this.enemyInfo.hp,this.maxhp=this.enemyInfo.hp,this.currentspeed=this.enemyInfo.enemySpeed+Math.ceil(10*Math.random()-5),this.reflashselfHpUI(),d(this.node,this.enemyInfo.name),r(this.node,this.enemyInfo,this),this.node.on(c.OnEnemyChangeHp,this.onchangehp,this),this.node.on(c.OnEnemyRunning,this.onstartrunning,this),this.node.on(c.OnHurtPlayer,this.starthurtplayer,this),this.node.on(c.OnEnemyDie,this.onenemydie,this),this.schedule((function(){null!=e.hurtnode&&e.hurtnode.emit(c.OnCommonChangeHp,-e.enemyInfo.atk)}),this.enemyInfo.atkcd)},i.update=function(e){this.currenthp<=0?this.onenemydie():(null!=this.bulletnode&&this.bulletnode.getComponent(p).getbulletid()!=this.bulletid&&(this.bulletnode=null,this.hurtnode=null,this.bulletid=-1,this.running=!0),this.running&&(u(this.node,this.currentspeed,e),y(this.node))&&this.onenemydie())},i.onchangehp=function(e,n){var t=this;e.bullettype==m.APPLE&&(this.running=!1,this.bulletnode=n,this.hurtnode=n,this.bulletid=this.bulletnode.getComponent(p).getbulletid());var i=Math.ceil(10*Math.random()-5)+e.art,o=f(e.bosswx,this.enemyInfo.wxpro);e.criticalstrike>0&&(i=(e.criticalstrike+e.bossadd+o+100)*i/100),this.currenthp-=i,this.currenthp-=e.gethp*this.enemyInfo.hp,e.minspeed>0&&(this.currentspeed=60*this.currentspeed/100,this.scheduleOnce((function(){t.currentspeed=t.enemyInfo.enemySpeed+Math.ceil(10*Math.random()-5)}),e.minspeed)),e.hasstop>0&&(this.running=!1,this.scheduleOnce(this.onstartrunning,e.hasstop)),e.poison>0&&this.schedule((function(){t.currenthp-=e.poison*t.enemyInfo.hp/100}),3,5),this.currenthp<=0?(e.traceBullet,this.onenemydie()):this.reflashselfHpUI()},i.onstartrunning=function(){this.running=!0},i.onenemydie=function(){l("敌死"),this.running=!1,this.node.getComponent(o).enabled=!1,this.node.getParent().emit(c.OnEnemyDrop,this.node.position.x,this.node.position.y,this.enemyInfo),this.node.destroy()},i.reflashselfHpUI=function(){this.node.getChildByName("enemyhp").getComponent(s).progress=this.currenthp/this.maxhp},i.starthurtplayer=function(){this.hurtnode=this.playernode,this.running=!1},t}(h))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/groupB.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enemy.ts","./index.ts","./Enemymange.ts","./evenenum.ts","./itemenum.ts"],(function(e){var n,t,i,s,o,h,r,p,a,u,d,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,s=e.CircleCollider2D,o=e.ProgressBar,h=e.Component},function(e){r=e.addEnemyCollisionListener},function(e){p=e.changeAnimateClip,a=e.playAudio},function(e){u=e.Enemymange},function(e){d=e.EVENTS},function(e){c=e.ITEMTYPE}],execute:function(){var m;t._RF.push({},"fa5fd6u7IZLZqz6uuS5JBRq","groupB",void 0);var y=i.ccclass;i.property,e("groupB",y("groupB")(m=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).enemyInfo=void 0,n.currenthp=0,n.maxhp=0,n.running=!0,n.currentspeed=void 0,n.playernode=void 0,n.xspeed=void 0,n}n(t,e);var i=t.prototype;return i.start=function(){var e=this.node.getParent().getComponent(u).thisWillBeCreatedEnemyGB;this.enemyInfo=Object.assign({},e),this.enemyInfo.group="groupB",this.playernode=this.node.getParent().getParent().getChildByName("player"),this.currenthp=this.enemyInfo.hp,this.maxhp=this.enemyInfo.hp,this.currentspeed=this.enemyInfo.enemySpeed+Math.ceil(10*Math.random()-5),this.reflashselfHpUI(),this.xspeed=this.enemyInfo.enemySpeed/2,this.node.position.x>0&&(this.xspeed=-this.enemyInfo.enemySpeed/2),p(this.node,this.enemyInfo.name),r(this.node,this.enemyInfo,this),this.node.on(d.OnEnemyChangeHp,this.onchangehp,this),this.node.on(d.OnEnemyRunning,this.onstartrunning,this),this.node.on(d.OnHurtPlayer,this.starthurtplayer,this),this.node.on(d.OnEnemyDie,this.onenemydie,this)},i.update=function(e){this.currenthp<=0?this.onenemydie():this.running&&this.node.setPosition(this.node.position.x+e*this.xspeed,this.node.position.y-e*this.enemyInfo.enemySpeed)},i.onchangehp=function(e,n){var t=this;e.bullettype==c.APPLE&&(this.running=!1);var i=Math.ceil(10*Math.random()-5)+e.art;e.criticalstrike>0&&(i=(e.criticalstrike+100)*i/100),this.currenthp-=i,this.currenthp-=e.gethp*this.enemyInfo.hp,e.minspeed>0&&(this.currentspeed=60*this.currentspeed/100,this.scheduleOnce((function(){t.currentspeed=t.enemyInfo.enemySpeed+Math.ceil(10*Math.random()-5)}),e.minspeed)),e.hasstop>0&&(this.running=!1,this.scheduleOnce(this.onstartrunning,e.hasstop)),e.poison>0&&this.schedule((function(){t.currenthp-=e.poison*t.enemyInfo.hp/100}),3,5),this.currenthp<=0?(e.traceBullet,this.onenemydie()):this.reflashselfHpUI()},i.onstartrunning=function(){this.running=!0},i.onenemydie=function(){a("敌死"),this.running=!1,this.node.getComponent(s).enabled=!1,this.node.getParent().emit(d.OnEnemyDrop,this.node.position.x,this.node.position.y,this.enemyInfo),this.node.destroy()},i.reflashselfHpUI=function(){this.node.getChildByName("enemyhp").getComponent(o).progress=this.currenthp/this.maxhp},i.starthurtplayer=function(){console.log("starthurtplayer groupb"),this.running=!1,this.playernode.emit(d.OnCommonChangeHp,-this.enemyInfo.atk),this.node.destroy()},t}(h))||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/groupBoss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enemy.ts","./index.ts","./evenenum.ts","./Player.ts","./Global.ts","./commonfunctiond.ts"],(function(n){var t,e,i,o,s,r,h,a,u,d,l,m,p,y,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.Label,s=n.CircleCollider2D,r=n.Component},function(n){h=n.addBossCollisionListener},function(n){a=n.changeAnimateClip,u=n.playAudio},function(n){d=n.EVENTS},function(n){l=n.Player},function(n){m=n.gameConfig},function(n){p=n.getbosstypebyid,y=n.getbosslevelbyid,c=n.getitemtypename}],execute:function(){var g;e._RF.push({},"94f78GDC9dMO794yp4xpxoB","groupBoss",void 0);var f=i.ccclass;i.property,n("groupBoss",f("groupBoss")(g=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).enemyInfo=void 0,t.running=!0,t.currentspeed=void 0,t.playernode=void 0,t.lasttime=void 0,t}t(e,n);var i=e.prototype;return i.start=function(){h(this.node,this.enemyInfo,this.node.getParent().getParent().getChildByName("player"),this),this.node.on(d.OnEnemyRunning,this.onstartrunning,this),this.node.on(d.OnHuntBoss,this.onhunt,this),this.node.on(d.OnHurtPlayer,this.starthurtplayer,this)},i.oninit=function(n){this.enemyInfo=Object.assign({},n),this.playernode=this.node.getParent().getParent().getChildByName("player"),this.running=!0,this.lasttime=-1,this.currentspeed=this.enemyInfo.enemySpeed+Math.ceil(10*Math.random()-5);var t=p(n.ID),e=y(n.ID);this.node.getChildByName("skilltype").getComponent(o).string=c(t)+" "+e+"级",a(this.node,this.enemyInfo.name)},i.update=function(n){if(this.lasttime>=0&&(this.lasttime+=n,this.lasttime>this.enemyInfo.atktime&&(this.playernode.emit(d.OnCommonChangeHp,-this.enemyInfo.atk,this.node),this.lasttime-=this.enemyInfo.atktime)),this.running){var t=this.node.getPosition(),e=t.x+this.currentspeed*n;e>m.mapWidth/2&&(e=-m.mapWidth/2),this.node.setPosition(e,t.y)}},i.onstartrunning=function(){this.running=!0},i.onenemydie=function(){u("敌死"),this.running=!1,this.node.getComponent(s).enabled=!1,this.node.getParent().emit(d.OnEnemyDrop,this.node.position.x,this.node.position.y,this.enemyInfo.droplist),this.node.emit(d.OnBossDie,this.node),console.log("销毁自己1")},i.starthurtplayer=function(){this.running=!1,this.playernode.emit(d.OnCommonChangeHp,-this.enemyInfo.atk,this.node),this.lasttime=0},i.onhunt=function(n){this.playernode.getComponent(l).onhuntbossresult(n,this.enemyInfo.ID),this.onenemydie()},e}(r))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/groupHit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enemy.ts","./index.ts","./Enemymange.ts","./evenenum.ts","./bullet.ts","./itemenum.ts","./commonfunctiond.ts","./Player.ts"],(function(e){var n,t,i,o,s,h,r,u,d,l,a,p,y,c,m,f,g,C;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.Sprite,s=e.Vec2,h=e.CircleCollider2D,r=e.Label,u=e.Component},function(e){d=e.addEnemyCollisionListener},function(e){l=e.playAudio},function(e){a=e.Enemymange},function(e){p=e.EVENTS},function(e){y=e.bullet},function(e){c=e.ITEMTYPE,m=e.SPC_TYPE},function(e){f=e.SetSpriteImage,g=e.isoutofscreen},function(e){C=e.Player}],execute:function(){var v;t._RF.push({},"41d8dIurnBEf6K03DZHLpT+","groupHit",void 0);var b=i.ccclass;i.property,e("groupHit",b("groupHit")(v=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).enemyInfo=void 0,n.currenthp=0,n.maxhp=0,n.running=!0,n.currentspeed=void 0,n.playernode=void 0,n.bulletnode=void 0,n.bulletid=void 0,n.hurtnode=void 0,n}n(t,e);var i=t.prototype;return i.start=function(){var e=this,n=this.node.getParent().getComponent(a).thisWillBeCreatedEnemyInfo;this.enemyInfo=Object.assign({},n),this.playernode=this.node.getParent().getParent().getChildByName("player"),f(this.enemyInfo.name,this.node.getComponent(o)),this.bulletid=-1,this.currenthp=this.enemyInfo.hp,this.maxhp=this.enemyInfo.hp,this.currentspeed=this.enemyInfo.enemySpeed+Math.ceil(10*Math.random()-5),d(this.node,this.enemyInfo,this),this.node.on(p.OnEnemyChangeHp,this.onchangehp,this),this.node.on(p.OnEnemyRunning,this.onstartrunning,this),this.node.on(p.OnHurtPlayer,this.starthurtplayer,this),this.node.on(p.OnEnemyDie,this.onenemydie,this),this.schedule((function(){null!=e.hurtnode&&e.hurtnode.emit(p.OnCommonChangeHp,-e.enemyInfo.atk)}),this.enemyInfo.atkcd)},i.update=function(e){if(this.currenthp<=0)return this.onenemydie(),void console.log("onenemydie1");if(null!=this.bulletnode&&this.bulletnode.getComponent(y).getbulletid()!=this.bulletid&&(this.bulletnode=null,this.hurtnode=null,this.bulletid=-1,this.running=!0),this.running){var n=this.playernode.position,t=this.node.position,i=new s(n.x,n.y),o=new s(t.x,t.y),h=i.subtract(o).angle(new s(1,0));if(this.node.setPosition(t.x+this.currentspeed*e*Math.cos(h),t.y),t.y<n.y?this.node.setPosition(t.x,t.y+this.currentspeed*e*Math.sin(h)):this.node.setPosition(t.x,t.y-this.currentspeed*e*Math.sin(h)),g(this.node))return this.onenemydie(),void console.log("onenemydie2")}},i.onchangehp=function(e,n){e.bullettype==c.APPLE&&(this.running=!1,this.bulletnode=n,this.hurtnode=n,this.bulletid=this.bulletnode.getComponent(y).getbulletid()),this.onenemydie()},i.onstartrunning=function(){this.running=!0},i.onenemydie=function(){var e=this;if(l("敌死"),this.running=!1,this.node.getComponent(h).enabled=!1,this.node.active=!1,"addhp"==this.enemyInfo.tag){var n=this.node.getChildByName("tempchar");return n.getComponent(r).string="+"+this.enemyInfo.atk,n.active=!0,this.playernode.emit(p.OnCommonChangeHp,this.enemyInfo.atk),void this.scheduleOnce((function(){e.node.destroy()}),1)}this.node.getParent().getComponent(a);"killx"==this.enemyInfo.tag&&this.playernode.getComponent(C).playspcefff(this.node.position.x,m.SPC_x),"killy"==this.enemyInfo.tag&&this.playernode.getComponent(C).playspcefff(this.node.position.y,m.SPC_y),this.node.destroy()},i.starthurtplayer=function(){console.log("starthurtplayer"),this.node.destroy()},t}(u))||v);t._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(n){var t,e,o,i,r,a,u,c,s,l,f,d,p,m;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n.resources,i=n.SpriteFrame,r=n.Sprite,a=n.SpriteAtlas,u=n.Animation,c=n.assetManager,s=n.Texture2D,l=n.Collider2D,f=n.Contact2DType,d=n.Vec2,p=n.Event},function(n){m=n.gameConfig}],execute:function(){n({addCollisionListener:function(n,t){var e=n.getComponent(l);e&&e.on(f.BEGIN_CONTACT,t)},addCollisionListenerEnd:function(n,t){var e=n.getComponent(l);e&&e.on(f.END_CONTACT,t)},angle_to_radian:function(n){return Math.PI/180*n},angle_to_vector:function(n){var t=this.angle_to_radian(n),e=Math.cos(t),o=Math.sin(t);return new d(e,o).normalize()},calculationDis:function(n,t){var e=n.position.x-t.position.x,o=n.position.y-t.position.y;return Math.sqrt(e*e+o*o)},changeAnimateClip:function(n,t){n.getComponent(u).play(t)},changeSpriteAltas:function(n,t,e){o.load(t,a,(function(t,o){n.getComponent(r).spriteFrame=o.getSpriteFrame(e||Object.keys(o.spriteFrames)[0])}))},changeSpriteFrame:function(n,t,e){o.load(t,i,(function(t,o){n.getComponent(r).spriteFrame=o,e&&e()}))},hideBanner:function(){},loadBanner:function(){},loadInsertAd:function(){if(m.insertAd)return},loadRemoteAudio:function(n,t){return new Promise((function(t){c.loadRemote(n,(function(n,e){t(n?null:e)}))}))},loadRemoteImage:function(n,t){return new Promise((function(e){c.loadRemote(n,(function(n,o){var a=new i,u=new s;u.image=o,a.texture=u,t?(t.getComponent(r).spriteFrame=a,e("ok")):e(a)}))}))},loadVideo:function(){return new Promise((function(n,t){}))},openShareMenu:function(){},playAudio:function(n,t){void 0===t&&(t=.2);m[n]&&m[n].playOneShot(m[n].clip,t)},radian_to_angle:g,shareWithWx:function(n,t){},showBanner:function(){},showInsertAd:function(){},showVideo:function(){return new Promise((function(n,t){n(!0)}))},ss2mmss:function(n){if(n<60)return n<10?"00:0"+n:"00:"+n;var t=Math.floor(n/60),e=Math.floor(n%60);if(t<60)return t<10?e<10?"0"+t+":0"+e:"0"+t+":"+e:e<10?t+":0"+e:t+":"+e},vector_to_angle:function(n){return-g(n.normalize().signAngle(new d(1,0)))}}),e._RF.push({},"4450cZHU9FLcKXq+0L8Cb8Y","index",void 0);n("MyEvent",function(n){function e(t,e,o){var i;return(i=n.call(this,t,e)||this).detail=null,i.detail=o,i}return t(e,n),e}(p));function g(n){return 180/Math.PI*n}e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemContrastUi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./evenenum.ts","./commonfunctiond.ts"],(function(e){var t,i,n,r,l,s,a,o,u,c,m,f,p,d,b,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,a=e.Node,o=e.RichText,u=e.Label,c=e.Sprite,m=e.math,f=e.Component},function(e){p=e.EVENTS},function(e){d=e.GetItemName,b=e.getothersattribite,h=e.GetItemcolor,g=e.SetSpriteImage}],execute:function(){var y,w,z,v,C,I,k,N,B,S,q,D,U,_,E,L,M,R,T,x,F,G,K,O,P,j,A,H,J,V,Q,W,X,Y,Z,$,ee,te,ie;l._RF.push({},"4f808qbm2lBhKJKMMcnDeE6","ItemContrastUi",void 0);var ne=s.ccclass,re=s.property;e("ItemContrastUi",(y=ne("ItemContrastUi"),w=re(a),z=re(a),v=re(o),C=re(u),I=re(u),k=re(u),N=re(u),B=re(u),S=re(c),q=re(c),D=re(o),U=re(u),_=re(u),E=re(u),L=re(u),M=re(u),R=re(c),T=re(c),y((G=t((F=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return t=e.call.apply(e,[this].concat(l))||this,n(t,"srcitem",G,r(t)),n(t,"desitem",K,r(t)),n(t,"desitemname",O,r(t)),n(t,"deshp",P,r(t)),n(t,"desdef",j,r(t)),n(t,"desatt",A,r(t)),n(t,"desspeed",H,r(t)),n(t,"desother",J,r(t)),n(t,"desicon",V,r(t)),n(t,"desiconback",Q,r(t)),n(t,"selfitemname",W,r(t)),n(t,"selfhp",X,r(t)),n(t,"selfdef",Y,r(t)),n(t,"selfatt",Z,r(t)),n(t,"selfspeed",$,r(t)),n(t,"selfother",ee,r(t)),n(t,"selficon",te,r(t)),n(t,"selficonback",ie,r(t)),t.nowpos=0,t.desdata=null,t}i(t,e);var l=t.prototype;return l.start=function(){this.setitemuivisible(!1)},l.update=function(e){},l.setitemuivisible=function(e){this.srcitem.active=e,this.desitem.active=e},l.onshowItem=function(e,t){this.desdata=e,this.desother.string="",this.desitemname.string=d(e.itemname,e.qulity)+":"+e.itemlevel+"级",this.deshp.string="射程："+e.dis,this.desdef.string="释放cd："+e.cd,this.desatt.string="攻击："+e.attr,this.desspeed.string="敏捷："+e.agility,this.desitem.getChildByName("itemshow").getChildByName("penetrate").getComponent(u).string="穿透："+e.penetratenum,e.specialtype>0&&(this.desother.string=""+b(e.specialtype,e.specialnum)),this.desiconback.color=m.color(h(e.qulity)),g(e.iconname,this.desicon),this.desitem.active=!0,null!=t&&(this.selfitemname.string=d(t.itemname,t.qulity)+":"+t.itemlevel+"级",this.selfother.string="",this.selfhp.string="射程："+t.dis,this.selfdef.string="释放cd："+t.cd,this.selfatt.string="攻击："+t.attr,this.selfspeed.string="敏捷："+t.agility,this.srcitem.getChildByName("itemshow").getChildByName("penetrate").getComponent(u).string="穿透："+e.penetratenum,t.specialtype>0&&(this.selfother.string=""+b(t.specialtype,t.specialnum)),this.selficonback.color=m.color(h(t.qulity)),g(t.iconname,this.selficon),this.srcitem.active=!0)},l.onchangeitem=function(){null!=this.desdata&&(this.node.emit(p.OnChangeItem,this.desdata),this.setitemuivisible(!1))},l.onsellitem=function(){null!=this.desdata&&(this.node.emit(p.OnSellItem,this.desdata),this.setitemuivisible(!1))},t}(f)).prototype,"srcitem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"desitem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"desitemname",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(F.prototype,"deshp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(F.prototype,"desdef",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(F.prototype,"desatt",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(F.prototype,"desspeed",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(F.prototype,"desother",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(F.prototype,"desicon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(F.prototype,"desiconback",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(F.prototype,"selfitemname",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(F.prototype,"selfhp",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(F.prototype,"selfdef",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(F.prototype,"selfatt",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(F.prototype,"selfspeed",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(F.prototype,"selfother",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(F.prototype,"selficon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(F.prototype,"selficonback",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=F))||x));l._RF.pop()}}}));

System.register("chunks:///_virtual/itemenum.ts",["cc"],(function(E){var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){T._RF.push({},"19425kyrPdI0L3uxof8ELgR","itemenum",void 0);E("ITEMTYPE",function(E){return E[E.NOMAL=0]="NOMAL",E[E.FIRE=1]="FIRE",E[E.BOOMERANG=2]="BOOMERANG",E[E.FIREWORKS=3]="FIREWORKS",E[E.SWORD=4]="SWORD",E[E.LOTUSFLOWER=5]="LOTUSFLOWER",E[E.BOMB=6]="BOMB",E[E.LIGHTNING=7]="LIGHTNING",E[E.WATREBULLET=8]="WATREBULLET",E[E.APPLE=9]="APPLE",E[E.BOSSCAGE=10]="BOSSCAGE",E[E.MAXITEMTYPE=11]="MAXITEMTYPE",E[E.BOSSSKILLTYPE=12]="BOSSSKILLTYPE",E}({})),E("COINTYPE",function(E){return E[E.COINTYPE_MONEY=1]="COINTYPE_MONEY",E[E.COINTYPE_SBEAST=2]="COINTYPE_SBEAST",E[E.COINTYPE_LINSHI=3]="COINTYPE_LINSHI",E[E.COINTYPE_MAX=4]="COINTYPE_MAX",E}({})),E("ITEMQULITY",function(E){return E[E.QULITY_WIHTE=1]="QULITY_WIHTE",E[E.QULITY_GREEN=2]="QULITY_GREEN",E[E.QULITY_BULE=3]="QULITY_BULE",E[E.QULITY_PURPLE=4]="QULITY_PURPLE",E[E.QULITY_GOLD=5]="QULITY_GOLD",E[E.QULITY_RED=6]="QULITY_RED",E[E.QULITY_YELLOW=7]="QULITY_YELLOW",E[E.QULITY_BRIBLUE=8]="QULITY_BRIBLUE",E[E.QULITY_COLOR=9]="QULITY_COLOR",E[E.QULITY_MAX=10]="QULITY_MAX",E}({})),E("ITEMEFFECT",function(E){return E[E.EFFECT_VAMPIRISM=1]="EFFECT_VAMPIRISM",E[E.EFFECT_SLOW=2]="EFFECT_SLOW",E[E.EFFECT_STOP=3]="EFFECT_STOP",E[E.EFFECT_POISON=4]="EFFECT_POISON",E[E.EFFECT_CRIT=5]="EFFECT_CRIT",E[E.EFFECT_MAX=5]="EFFECT_MAX",E}({})),E("TARGETTYPE",function(E){return E[E.TARGET_NONE=0]="TARGET_NONE",E[E.TARGET_MIN=1]="TARGET_MIN",E[E.TARGET_RANDOM=2]="TARGET_RANDOM",E}({})),E("WX_TYPE",function(E){return E[E.WX_JIN=1]="WX_JIN",E[E.WX_MU=2]="WX_MU",E[E.WX_SHUI=3]="WX_SHUI",E[E.WX_HUO=4]="WX_HUO",E[E.WX_TU=5]="WX_TU",E}({})),E("SPC_TYPE",function(E){return E[E.SPC_x=1]="SPC_x",E[E.SPC_y=2]="SPC_y",E}({})),E("NEWCOMTP",function(E){return E[E.NEWCOMTP_GETITEM=1]="NEWCOMTP_GETITEM",E[E.NEWCOMTP_GETBOSS=2]="NEWCOMTP_GETBOSS",E}({}));T._RF.pop()}}}));

System.register("chunks:///_virtual/loadscene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMange.ts"],(function(e){var t,n,a,r,o,i,s,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,s=e.Node,c=e.director,l=e.Component},function(e){u=e.GameMange}],execute:function(){var d,p,g,f,m,y,b,h,v;o._RF.push({},"af250VGLgJKCYkNbdL0o+xh","loadscene",void 0);var w=i.ccclass,z=i.property,L=u.getInstance();e("loadscene",(d=w("loadscene"),p=z(s),g=z(s),f=z(s),d((b=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"newgamenode",b,r(t)),a(t,"startnode",h,r(t)),a(t,"restartnode",v,r(t)),t}n(t,e);var o=t.prototype;return o.start=function(){L.start(),L.isnew()?this.newgamenode.active=!0:(this.startnode.active=!0,this.restartnode.active=!0)},o.update=function(e){L.isready()&&c.loadScene("mainscene")},o.restartgame=function(){L.setneedload(!1),L.setgamestart(!0)},o.startgame=function(){L.setneedload(!0),L.setgamestart(!0)},t}(l)).prototype,"newgamenode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(y.prototype,"startnode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(y.prototype,"restartnode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Global.ts","./bossmange.ts","./groupBoss.ts","./Bossskill.ts","./BulletEmitter.ts","./BulletProperty.ts","./bullet.ts","./bulletboss.ts","./bulletzhua.ts","./fire.ts","./fireControl.ts","./sword.ts","./ConfigData.ts","./EventMange.ts","./commonfunctiond.ts","./Enemymange.ts","./enemy.ts","./groupA.ts","./groupB.ts","./groupHit.ts","./evenenum.ts","./itemenum.ts","./GameMange.ts","./Player.ts","./loadscene.ts","./Coin.ts","./CoinEmitter.ts","./time.ts","./ItemContrastUi.ts","./UiMange.ts","./closeself.ts","./setselfunactive.ts","./timecountdown.ts","./index.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts","./Enemymange.ts","./commonfunctiond.ts","./BulletEmitter.ts","./BulletProperty.ts","./evenenum.ts","./ItemContrastUi.ts","./UiMange.ts","./itemenum.ts","./bossmange.ts","./time.ts","./Bossskill.ts","./GameMange.ts","./bulletzhua.ts"],(function(e){var t,i,s,l,n,a,o,r,h,u,m,g,p,b,c,d,f,y,v,x,w,E,C,k,P,I,B,S,N,T,O,M,z,L,A,_,Y,D,G,q,R,F,H;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,l=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,o=e._decorator,r=e.Node,h=e.Prefab,u=e.sys,m=e.BoxCollider2D,g=e.Label,p=e.Vec2,b=e.ProgressBar,c=e.RichText,d=e.randomRangeInt,f=e.Component},function(e){y=e.ConfigData},function(e){v=e.Enemymange},function(e){x=e.getRandomInt,w=e.getrandomitem,E=e.getitembyweight,C=e.getspecialnumbytype,k=e.getbosstypebyid,P=e.getbosswxbyid,I=e.getbossid,B=e.getbosslevelbyid},function(e){S=e.BulletEmitter},function(e){N=e.BulletProperty},function(e){T=e.EVENTS},function(e){O=e.ItemContrastUi},function(e){M=e.UiMange},function(e){z=e.ITEMTYPE,L=e.COINTYPE,A=e.NEWCOMTP,_=e.ITEMQULITY,Y=e.ITEMEFFECT,D=e.TARGETTYPE},function(e){G=e.bossmange},function(e){q=e.time},function(e){R=e.Bossskill},function(e){F=e.GameMange},function(e){H=e.bulletzhua}],execute:function(){var W,U,j,X,K,J,Q,V,Z,$,ee,te,ie,se,le,ne,ae,oe,re,he,ue,me,ge,pe,be,ce,de,fe,ye,ve,xe,we,Ee,Ce,ke,Pe,Ie,Be,Se,Ne,Te,Oe,Me;a._RF.push({},"3305aKSAFBBj6Nny52Hlvu4","Player",void 0);var ze=o.ccclass,Le=o.property,Ae=F.getInstance(),_e=y.getInstance();e("Player",(W=ze("Player"),U=Le(r),j=Le(h),X=Le(h),K=Le(h),J=Le(h),Q=Le(h),V=Le(h),Z=Le(r),$=Le(r),ee=Le(r),te=Le(r),ie=Le(r),se=Le(r),le=Le(r),ne=Le(r),ae=Le(r),oe=Le(r),re=Le(r),he=Le(r),ue=Le(r),W((pe=t((ge=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(t,"fightui",pe,l(t)),s(t,"nomalbullet",be,l(t)),s(t,"applebullet",ce,l(t)),s(t,"duyaobullet",de,l(t)),s(t,"showbullet",fe,l(t)),s(t,"bossskillPrefab",ye,l(t)),s(t,"timecdpre",ve,l(t)),s(t,"bulletmange",xe,l(t)),s(t,"money",we,l(t)),s(t,"lingshi",Ee,l(t)),s(t,"spiritbeast",Ce,l(t)),s(t,"coinmange",ke,l(t)),s(t,"bossmange",Pe,l(t)),s(t,"uimangenode",Ie,l(t)),s(t,"timenode",Be,l(t)),t.uimange=void 0,t.bossfight=void 0,s(t,"playerlevelnode",Se,l(t)),s(t,"boxlevelnode",Ne,l(t)),s(t,"guagou",Te,l(t)),s(t,"getitembaton",Oe,l(t)),t.maxhp=void 0,t.currenthp=void 0,t.itemlist=new Map,t.playerlevel=void 0,t.maxexp=void 0,t.curexp=void 0,t.playerstr=void 0,t.boxlevel=void 0,t.rewardnum=void 0,t.stagelevel=void 0,t.maxstagelevel=void 0,t.coinbox=new Map,t.bosslist=void 0,t.starlevel=void 0,t.bossskillid=void 0,t.isneedskill=void 0,t.besttime=void 0,t.hasnewcome=void 0,s(t,"itemcontrast",Me,l(t)),t.enemymange=null,t.bulletPrefab=new Map,t.BulletEmitterlist=new Map,t.bossdkillEmitter=void 0,t}i(t,e);var a=t.prototype;return a.onLoad=function(){},a.start=function(){this.uimange=this.uimangenode.getComponent(M),this.enemymange=this.node.getParent().getChildByName("enemymanage").getComponent(v),this.bossfight=this.fightui.getChildByName("bossfight"),this.bulletPrefab.set(z.NOMAL,this.nomalbullet),this.bulletPrefab.set(z.FIRE,this.nomalbullet),this.bulletPrefab.set(z.BOOMERANG,this.nomalbullet),this.bulletPrefab.set(z.FIREWORKS,this.nomalbullet),this.bulletPrefab.set(z.SWORD,this.nomalbullet),this.bulletPrefab.set(z.LOTUSFLOWER,this.duyaobullet),this.bulletPrefab.set(z.BOMB,this.nomalbullet),this.bulletPrefab.set(z.LIGHTNING,this.nomalbullet),this.bulletPrefab.set(z.WATREBULLET,this.showbullet),this.bulletPrefab.set(z.BOSSCAGE,this.nomalbullet),this.bulletPrefab.set(z.APPLE,this.applebullet),this.bulletPrefab.set(z.BOSSSKILLTYPE,this.bossskillPrefab);var e=new Map;e.set(L.COINTYPE_MONEY,this.money),e.set(L.COINTYPE_LINSHI,this.lingshi),e.set(L.COINTYPE_SBEAST,this.spiritbeast),this.uimange.setcoinnodelist(e),this.node.on(T.OnCommonChangeHp,this.updateHp,this),this.node.on(T.OnplayerAddExp,this.onchangeplayerexp,this),this.uimangenode.on(T.OnChooseItem,this.showitemcontrast,this),this.itemcontrast.on(T.OnChangeItem,this.equipitem,this),this.itemcontrast.on(T.OnSellItem,this.discloseitem,this),this.oninitplayerdata(),Ae.needload()&&this.onloadplayerdata(),this.oninit(),this.onsaveplayerdata(),Ae.isnew()&&(this.uimange.newonecomeshow(this.getitembaton,"按一下试试手气吧"),this.hasnewcome=A.NEWCOMTP_GETITEM)},a.oninitplayerdata=function(){this.playerlevel=1,this.boxlevel=1,this.stagelevel=1,this.rewardnum=0,this.curexp=0,this.starlevel=0,this.bossskillid=0,this.besttime=0,this.isneedskill=!0,this.itemlist=new Map,this.coinbox=new Map,this.bosslist=new Map;for(var e=L.COINTYPE_MONEY;e<L.COINTYPE_MAX;e++)this.coinbox.set(e,0);this.coinbox.set(L.COINTYPE_LINSHI,10);var t=_e.getplayerdata(this.playerlevel);if(null!=t){this.maxhp=t.maxhp,this.maxexp=t.maxexp,this.currenthp=this.maxhp,this.onexpuireflash(t.levelname);var i=_e.getitemdata(10101);this.equipitem(i)}},a.getplayerdatakey=function(e){return"{player}"+e},a.getmapsavedata=function(e){var t=[];return e.forEach((function(e,i){t.push({key:i,value:e})})),JSON.stringify(t)},a.getmapdatafromsavedata=function(e,t){JSON.parse(e).forEach((function(e){t.set(e.key,e.value)}))},a.onsaveplayerdata=function(){u.localStorage.setItem(this.getplayerdatakey("playerlevel"),this.playerlevel),u.localStorage.setItem(this.getplayerdatakey("boxlevel"),this.boxlevel),u.localStorage.setItem(this.getplayerdatakey("stagelevel"),this.stagelevel),u.localStorage.setItem(this.getplayerdatakey("rewardnum"),this.rewardnum),u.localStorage.setItem(this.getplayerdatakey("curexp"),this.curexp),u.localStorage.setItem(this.getplayerdatakey("starlevel"),this.starlevel),u.localStorage.setItem(this.getplayerdatakey("bossskillid"),this.bossskillid),u.localStorage.setItem(this.getplayerdatakey("itemlist"),this.getmapsavedata(this.itemlist)),u.localStorage.setItem(this.getplayerdatakey("coinbox"),this.getmapsavedata(this.coinbox)),u.localStorage.setItem(this.getplayerdatakey("bosslist"),this.getmapsavedata(this.bosslist))},a.onloadplayerdata=function(){console.log("onloadplayerdata");var e=u.localStorage.getItem(this.getplayerdatakey("playerlevel"));null!=e&&(this.playerlevel=Number(e));var t=u.localStorage.getItem(this.getplayerdatakey("boxlevel"));null!=t&&(this.boxlevel=Number(t));var i=u.localStorage.getItem(this.getplayerdatakey("stagelevel"));null!=i&&(this.stagelevel=Number(i));var s=u.localStorage.getItem(this.getplayerdatakey("rewardnum"));null!=s&&(this.rewardnum=Number(s));var l=u.localStorage.getItem(this.getplayerdatakey("curexp"));null!=l&&(this.curexp=Number(l));var n=u.localStorage.getItem(this.getplayerdatakey("starlevel"));null!=n&&(this.starlevel=Number(n));var a=u.localStorage.getItem(this.getplayerdatakey("bossskillid"));null!=a&&(this.bossskillid=Number(a));var o=u.localStorage.getItem(this.getplayerdatakey("itemlist"));null!=o&&this.getmapdatafromsavedata(o,this.itemlist);var r=u.localStorage.getItem(this.getplayerdatakey("coinbox"));null!=r&&this.getmapdatafromsavedata(r,this.coinbox);var h=u.localStorage.getItem(this.getplayerdatakey("bosslist"));null!=h&&this.getmapdatafromsavedata(h,this.bosslist)},a.oninit=function(){var e=this;this.uimange.restart(),this.timenode.getComponent(q).restart(),this.itemcontrast.getComponent(O).setitemuivisible(!1),this.coinbox.forEach((function(t,i,s){e.uimange.reflashcoinnode(i,t)})),this.node.getComponent(m).enabled=!0;var t=_e.getstagedata(this.stagelevel);if(null!=t){var i=[];t.bosslist.forEach((function(e,t,s){var l=Object.assign({},_e.getbossdatacfg(t));l.probability=e,i.push(l)})),null!=this.itemlist.get(z.BOSSCAGE)&&this.stagelevel>2&&this.bossmange.getComponent(G).oninitbossmanage(i,0);var s=[];t.enemylist.forEach((function(e,t,i){var l=_e.getenemydata(t);if(null!=l){var n=Object.assign({},l);n.probability=e,s.push(n)}})),s.length>0&&this.enemymange.oninitenemy(s)}this.uimange.oninititemlisticon();for(var l,a=n(this.itemlist);!(l=a()).done;){var o=l.value,r=(o[0],o[1]);this.uimange.reflashitemlisticon(r.equipitem);this.createBulletEmitter(r.equipitem)}this.onfightbossuireflash(),this.onsetboxlevelui(),this.uimange.initbosslist(this),this.bossskillid>0&&this.onsetbossskilladd()},a.onsetboxlevelui=function(){this.boxlevelnode.getChildByName("boxlevel").getComponent(g).string=""+this.boxlevel},a.onDestroy=function(){console.log("onDestroy"),this.onsaveplayerdata(),this.BulletEmitterlist.forEach((function(e,t){e.onDestroy()})),this.bossdkillEmitter.destroy()},a.update=function(e){},a.createBulletEmitter=function(e){var t=new N;t.getdatafromitemdata(e);var i=new S(t,this,e.bulletnum);i.start(),this.BulletEmitterlist.set(e.itemtype,i)},a.createbossskillEmitter=function(e){var t=new N;if(t.getdatafromitemdata(e),t.startpos=new p(this.node.getPosition().x,this.node.getPosition().y),null==this.bossdkillEmitter){var i=new R(t,this,e.bulletnum);i.start(),this.bossdkillEmitter=i}else this.bossdkillEmitter.resetitem(t,e.bulletnum)},a.getitem=function(){var e=_e.getitemboxcfg(this.boxlevel),t=e.itemtotalweight;this.rewardnum>=e.basenum&&(t+=(this.rewardnum-e.basenum)*e.bigaddweight);for(var i,s=x(1,t),l=0,a=0,o=n(e.itemlist);!(i=o()).done;){var r=i.value,h=r[0],u=l;l+=r[1],s>u&&s<l&&(a=h)}return 0==a&&e.bigpriceid>0&&(a=e.bigpriceid,this.rewardnum=0),a},a.showitemcontrast=function(e){var t=Object.assign({},e);if(!(t.itemid<=0)){var i=this.itemlist.get(t.itemtype);null!=i?this.itemcontrast.getComponent(O).onshowItem(t,i.equipitem):this.equipitem(e)}},a.equipitem=function(e){var t=0;if(!(e.itemid<=0)){var i=null,s=this.itemlist.get(e.itemtype);null!=s&&(i=s.equipitem);var l=Date.now()-e.cd,n=Object.assign({},e),a={lasttime:l,equipitem:n};if(this.itemlist.set(n.itemtype,a),null!=i&&(t=e.fightpower-i.fightpower,this.discloseitem(i)),this.uimange.reflashitemlisticon(n),n.itemtype!=z.BOSSCAGE){var o=this.BulletEmitterlist.get(n.itemtype);null!=o&&o.onDestroy(),this.createBulletEmitter(n)}this.onsaveplayerdata(),0!=t&&this.uimange.fightpower(t)}},a.updatecoin=function(e,t,i,s){var l=this.coinbox.get(e);null!=l?l+=t:l=t,l<0&&(l=0),this.coinbox.set(e,l),this.uimange.ongetcoin(e,l,i,s),this.uimange.onboxlevelupupdate(this)},a.discloseitem=function(e){e.itemid<=0||this.getcoinlist(e.disclosere)},a.updateScore=function(e){},a.updateHp=function(e){if(this.currenthp=this.currenthp+e,this.currenthp>this.maxhp&&(this.currenthp=this.maxhp),this.currenthp<=0)return this.currenthp=0,void this.onplayerdie();this.onfightbossuireflash()},a.ongetitem=function(){this.hasnewcome==A.NEWCOMTP_GETITEM&&(this.uimange.newonecomehit(),this.hasnewcome=0);var e=_e.getboxinf(this.boxlevel);if(null!=e)if(this.costcoin(L.COINTYPE_LINSHI,e.getcost)){var t=[],i=[],s=_e.getitemboxcfg(this.boxlevel),l=s.bigpriceweight;this.rewardnum>=s.basenum&&(l+=(this.rewardnum-s.basenum)*s.bigaddweight);var n=s.itemlist;n.set(z.MAXITEMTYPE,l);for(var a=0;a<3;a++){var o=s.bigpriceid,r=w(n),h=r.itemtype,u=r.newlist;if(h!=z.MAXITEMTYPE)o=1e3*h+100*E(e.itemqulityrate)+x(1,10);var m=_e.getitemdata(o);m.qulity>_.QULITY_BULE&&(m.specialtype=x(1,Y.EFFECT_MAX),m.specialnum=C(m.specialtype)),t.push(m),n=u;var g=0,p=this.itemlist.get(m.itemtype);null!=p&&(g=p.equipitem.itemid),i.push(g)}this.uimange.showgetitemui(t,i)}else this.uimange.shownoticefram("灵石不足，少侠请努力杀怪!")},a.getcoinlist=function(e){for(var t,i=n(e);!(t=i()).done;){var s=t.value,l=s[0],a=s[1],o=this.node.getPosition();this.updatecoin(l,a,o.x,o.y)}},a.getcoinlistbyposition=function(e,t,i){for(var s,l=n(i);!(s=l()).done;){var a=s.value,o=a[0],r=a[1],h=x(1,r);this.updatecoin(o,h,e,t)}},a.getboss=function(){this.currenthp=this.maxhp,this.enemymange.stopenemys(),this.bossmange.getComponent(G).onstartboss(),this.isneedskill=!1;for(var e,t=n(this.bulletmange.children);!(e=t()).done;){var i=e.value;i.emit(T.onBulletDie,i)}var s=1,l=this.itemlist.get(z.BOSSCAGE);if(null!=l&&(s=l.equipitem.qulity),this.guagou.getChildByName("zhua").getComponent(H).onstartcountdown(s),this.hasnewcome==A.NEWCOMTP_GETBOSS){var a=this.node.getParent().getChildByName("boxing").getChildByName("huntboss");this.uimange.newonecomeshow(a,"点击爱心抓捕boss")}},a.cancelboss=function(){this.bossmange.getComponent(G).oncancleboss()},a.onfightbossuireflash=function(){this.bossfight.getChildByName("hpnum").getComponent(g).string=this.currenthp+" / "+this.maxhp,this.bossfight.getChildByName("hp").getComponent(b).progress=this.currenthp/this.maxhp},a.onexpuireflash=function(e){this.playerlevelnode.getChildByName("levletxt").getComponent(c).string=e,this.playerlevelnode.getComponent(b).progress=this.getcurrentexp()/this.maxexp,this.playerlevelnode.getChildByName("exp").getComponent(g).string=this.getcurrentexp()+" / "+this.maxexp},a.getcurrentexp=function(){return this.curexp},a.setcurrentexp=function(e){this.curexp=e},a.onbossfightover=function(){console.log("onbossfightover"),this.isneedskill=!0,this.guagou.getChildByName("zhua").setPosition(0,375),this.guagou.active=!1,this.enemymange.restartenemys()},a.onplayerdie=function(){console.log("onplayerdie"),this.bossmange.getComponent(G).onclearboss();var e=this.enemymange.onplayerdie();this.besttime<e&&(this.besttime=e),this.uimange.onplayerdie(e,this.besttime),this.BulletEmitterlist.forEach((function(e,t,i){e.onDestroy()})),this.bulletmange.destroyAllChildren(),this.BulletEmitterlist=new Map},a.onchangeplayerexp=function(e){this.setcurrentexp(this.getcurrentexp()+e),this.getcurrentexp()>this.maxexp&&this.onplayerlevelup(),this.onsaveplayerdata(),this.playerlevelnode.getComponent(b).progress=this.getcurrentexp()/this.maxexp,this.playerlevelnode.getChildByName("exp").getComponent(g).string=this.getcurrentexp()+" / "+this.maxexp},a.onplayerlevelup=function(){this.setcurrentexp(this.getcurrentexp()-this.maxexp),this.playerlevel++,this.uimange.onplayerlevelup(this),this.setstagelevel(this.stagelevel+1),this.onsaveplayerdata();var e=_e.getplayerdata(this.playerlevel);null!=e&&(this.maxexp=e.maxexp,this.maxhp=e.maxhp,this.onexpuireflash(e.levelname),this.currenthp=this.maxhp,this.onfightbossuireflash())},a.getenemybytargettype=function(e){if(e==D.TARGET_NONE)return null;var t=this.bossmange.getComponent(G).getbossnode();return null!=t?t:this.enemymange.getenemybyType(e)},a.huntboss=function(){this.bossmange.getComponent(G).sethuntbossflag(!1),this.guagou.getChildByName("zhua").getComponent(H).runzhua(),this.hasnewcome==A.NEWCOMTP_GETBOSS&&(this.uimange.newonecomehit(),this.hasnewcome=0)},a.onhuntbossresult=function(e,t){if(e){var i=d(1,6),s=k(t),l=B(t),n=I(l,s,i),a=_e.getbossdatacfg(n);if(null!=a){this.uimange.showhuntbossresult(a.uiurl,"animation");var o=this.bosslist.get(n);null==o&&(o=0),this.bosslist.set(n,o+1),a.starlevel>this.starlevel&&(this.starlevel=a.starlevel)}}this.uimange.onreflashboss(this)},a.getcurboxlevel=function(){return this.boxlevel},a.itempoollevleup=function(){this.uimange.boxlevelupshow(this)},a.itempoollevleupstart=function(){this.uimange.boxlevelupclose();var e=_e.getboxinf(this.boxlevel);null!=e&&(this.playerlevel<e.lupbosslevel?this.uimange.shownoticefram("你的等级有点低哦！"):this.costcoinmap(e.lupcost)?(this.boxlevel++,this.onsaveplayerdata(),this.onsetboxlevelui(),this.uimange.onboxlevelupsu()):this.uimange.shownoticefram("条件不满足不能升级"))},a.onplayerborn=function(){this.oninitplayerdata(),this.oninit(),this.onsaveplayerdata()},a.costcoin=function(e,t){var i=this.coinbox.get(e);if(i<t)return!1;var s=i-t;return this.coinbox.set(e,s),this.onsaveplayerdata(),this.uimange.reflashcoinnode(e,s),this.uimange.onboxlevelupupdate(this),!0},a.costcoinmap=function(e){var t=this,i=!0;return e.forEach((function(e,s,l){if(t.coinbox.get(s)<e)return i=!1,!1})),i&&(e.forEach((function(e,i,s){var l=t.coinbox.get(i)-e;t.coinbox.set(i,l),t.uimange.reflashcoinnode(i,l)})),this.onsaveplayerdata(),this.uimange.onboxlevelupupdate(this)),i},a.getcoinbytype=function(e){return null==this.coinbox.get(e)?0:this.coinbox.get(e)},a.getbosslevel=function(){return this.starlevel},a.getbossskill=function(){return this.bossskillid},a.openbosslist=function(){this.bosslist.size<=0?this.uimange.shownoticefram("你还没有抓到boss哦！"):this.uimange.onopenbosslist()},a.onchangebossskill=function(e){if(console.log("onchangebossskill"),console.log(e),e!=this.bossskillid){var t=this.bossskillid;this.bossskillid=e,t>0&&this.onresetbulletem(k(t)),this.onsetbossskilladd(),this.onsaveplayerdata(),this.uimange.setskillbuttonflag(t,!0)}},a.onsetbossskilladd=function(){var e=_e.getbossdatacfg(this.bossskillid);if(null!=e){var t=k(this.bossskillid),i=this.BulletEmitterlist.get(t);null!=i&&(i.onDestroy(),i.BulletProperty.bossadd=e.atk,i.BulletProperty.bosswx=P(this.bossskillid),i.bulletPrefab=this.bossskillPrefab,i.start()),this.uimange.reflashbossskillui(e.uiurl)}},a.onresetbulletem=function(e){console.log("恢复原来的发射器"),console.log(e);var t=this.BulletEmitterlist.get(e);null!=t&&(t.onDestroy(),t.BulletProperty.bossadd=0,t.BulletProperty.bosswx=0,t.bulletPrefab=this.bulletPrefab.get(e),t.start(),console.log("恢复原来的发射器成功"))},a.onsendbossskill=function(){},a.ontestbossskill=function(){this.setstagelevel(2)},a.setstagelevel=function(e){this.stagelevel=e,console.log("重置关卡信息"),console.log(e);var t=_e.getstagedata(this.stagelevel);if(null!=t){console.log(t);var i=[];t.bosslist.forEach((function(e,t,s){var l=Object.assign({},_e.getbossdatacfg(t));l.probability=e,i.push(l)})),i.length>0&&(2==this.stagelevel?(this.bossmange.getComponent(G).oninitbossmanage(i,0),this.hasnewcome=A.NEWCOMTP_GETBOSS):this.bossmange.getComponent(G).onsetbosslist(i));var s=[];t.enemylist.forEach((function(e,t,i){var l=_e.getenemydata(t);if(null!=l){var n=Object.assign({},l);n.probability=e,s.push(n)}})),s.length>0&&(this.enemymange.oninitenemy(s),2==e&&this.enemymange.createcurenemys(647),3==e&&this.enemymange.createcurenemys(647))}},a.playerneedskill=function(){return this.isneedskill},a.getbosslist=function(){return this.bosslist},a.getplayerlevel=function(){return this.playerlevel},a.getitemiconnode=function(e){return this.uimange.getitemiconnode(e)},a.playspcefff=function(e,t){this.uimange.playspcefff(e,t)},t}(f)).prototype,"fightui",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ge.prototype,"nomalbullet",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(ge.prototype,"applebullet",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(ge.prototype,"duyaobullet",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(ge.prototype,"showbullet",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(ge.prototype,"bossskillPrefab",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(ge.prototype,"timecdpre",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=t(ge.prototype,"bulletmange",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(ge.prototype,"money",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(ge.prototype,"lingshi",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(ge.prototype,"spiritbeast",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(ge.prototype,"coinmange",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(ge.prototype,"bossmange",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(ge.prototype,"uimangenode",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(ge.prototype,"timenode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ge.prototype,"playerlevelnode",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=t(ge.prototype,"boxlevelnode",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(ge.prototype,"guagou",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=t(ge.prototype,"getitembaton",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=t(ge.prototype,"itemcontrast",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=ge))||me));a._RF.pop()}}}));

System.register("chunks:///_virtual/setselfunactive.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t._decorator,c=t.Component}],execute:function(){var o;n._RF.push({},"06d090ief9JBaeoCD5tFa0b","setselfunactive",void 0);var i=s.ccclass;s.property,t("setselfunactive",i("setselfunactive")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.start=function(){},s.update=function(t){},s.closeself=function(){this.node.active=!1},n}(c))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/sword.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,s,c,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.tween,s=t.Vec3,c=t.Sprite,i=t.Color,u=t.Component}],execute:function(){var a;n._RF.push({},"73f14MnOtJA1r4F+h8DS0bn","sword",void 0);var p=o.ccclass;o.property,t("sword",p("sword")(a=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){var t=this;r().target(this.node).by(.4,{position:new s(0,-250,0)},{easing:"fade"}).start(),this.scheduleOnce((function(){t.node.getComponent(c).color=i.YELLOW}),.4),this.scheduleOnce((function(){t.node.destroy()}),.5)},n}(u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/time.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemymange.ts","./GameMange.ts"],(function(e){var t,i,n,a,r,s,m,o,h,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,m=e.Node,o=e.Label,h=e.sys,c=e.Component},function(e){l=e.Enemymange},function(e){u=e.GameMange}],execute:function(){var y,g,d,p,f;r._RF.push({},"745c0FDdStNlYhkSPihivyK","time",void 0);var v=s.ccclass,D=s.property,C=u.getInstance();e("time",(y=v("time"),g=D(m),y((f=t((p=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).time=0,t.isstop=void 0,t.enemyCreateDt=void 0,t.enemycreatertime=void 0,t.enemycreater=void 0,n(t,"enemymange",f,a(t)),t}i(t,e);var r=t.prototype;return r.start=function(){C.needload()&&this.loaddbdata(),this.onreflashtimeui(),this.enemycreater=this.enemymange.getComponent(l)},r.restart=function(){this.unscheduleAllCallbacks(),this.isstop=!1,this.time=0,this.enemyCreateDt=5,this.enemycreatertime=this.time+this.enemyCreateDt,this.onreflashtimeui(),this.schedule(this.ontick,1),this.onsaveBD()},r.ontick=function(){this.isstop||(this.enemyCreateDt>1&&(this.enemyCreateDt=this.enemyCreateDt-.13),this.time>this.enemycreatertime&&(this.enemycreatertime=this.time+this.enemyCreateDt,this.enemycreater.realCreateEnemy(),this.onsaveBD()),this.time>0&&this.time%50==0&&this.enemycreater.createnumberenemys(),this.time++,this.onreflashtimeui(),this.onsaveBD())},r.onreflashtimeui=function(){this.node.getChildByName("timestr").getComponent(o).string=""+this.time},r.onstop=function(){return this.isstop=!0,this.unscheduleAllCallbacks(),this.time},r.gettimedata=function(e){return"{time}"+e},r.onsaveBD=function(){h.localStorage.setItem(this.gettimedata("time"),this.time),h.localStorage.setItem(this.gettimedata("enemyCreateDt"),this.enemyCreateDt),h.localStorage.setItem(this.gettimedata("enemycreatertime"),this.enemycreatertime)},r.loaddbdata=function(){var e=h.localStorage.getItem(this.gettimedata("time"));null!=e&&(this.time=Number(e));var t=h.localStorage.getItem(this.gettimedata("enemyCreateDt"));null!=t&&(this.enemyCreateDt=Number(t));var i=h.localStorage.getItem(this.gettimedata("enemycreatertime"));null!=i&&(this.enemycreatertime=Number(i))},t}(c)).prototype,"enemymange",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/timecountdown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./evenenum.ts"],(function(t){var n,e,o,r,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Label,i=t.Component},function(t){c=t.EVENTS}],execute:function(){var s;e._RF.push({},"2e37dTMuFZHpp31zk970cvL","timecountdown",void 0);var u=o.ccclass;o.property,t("timecountdown",u("timecountdown")(s=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).intervalId=void 0,n}n(e,t);var o=e.prototype;return o.start=function(){},o.initself=function(t){this.startCountdown(t)},o.stopself=function(){clearInterval(this.intervalId)},o.update=function(t){},o.startCountdown=function(t){var n=this,e=this.node.getComponent(r);e.string=t+"s",this.intervalId=setInterval((function(){--t>=0?e.string=t+"s":(n.node.parent.emit(c.OnTimeCountdown),clearInterval(n.intervalId))}),1e3)},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/UiMange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts","./commonfunctiond.ts","./itemenum.ts","./evenenum.ts","./CoinEmitter.ts","./Player.ts"],(function(e){var t,i,o,n,l,s,a,r,c,u,h,m,p,g,d,b,f,v,y,C,w,N,B,x,k,P,E,I,T,z,S,Y,O,_,M,A,U,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,a=e.Node,r=e.Prefab,c=e.Sprite,u=e.math,h=e.instantiate,m=e.Label,p=e.sp,g=e.tween,d=e.Vec3,b=e.RichText,f=e.Button,v=e.UITransform,y=e.assetManager,C=e.Texture2D,w=e.Component},function(e){N=e.ConfigData},function(e){B=e.GetItemcolor,x=e.SetSpriteImage,k=e.getitemtypename,P=e.getconcolorchar,E=e.getothersattribite,I=e.GetItemNameLevel,T=e.getbosstypebyid,z=e.getwxname,S=e.getbosswxbyid},function(e){Y=e.ITEMTYPE,O=e.COINTYPE,_=e.ITEMQULITY,M=e.SPC_TYPE},function(e){A=e.EVENTS},function(e){U=e.CoinEmitter},function(e){D=e.Player}],execute:function(){var L,q,F,R,H,Q,j,G,V,W,X,J,K,Z,$,ee,te,ie,oe,ne,le,se,ae,re,ce,ue,he,me,pe,ge,de,be,fe,ve,ye,Ce,we,Ne,Be,xe,ke,Pe,Ee,Ie,Te,ze,Se;l._RF.push({},"c6fca9K56hBDY98xUNWB++h","UiMange",void 0);var Ye=s.ccclass,Oe=s.property,_e=N.getInstance();e("UiMange",(L=Ye("UiMange"),q=Oe(a),F=Oe(r),R=Oe(a),H=Oe(r),Q=Oe(a),j=Oe(a),G=Oe(a),V=Oe(a),W=Oe(a),X=Oe(a),J=Oe(a),K=Oe(a),Z=Oe(r),$=Oe(r),ee=Oe(a),te=Oe(a),ie=Oe(a),oe=Oe(a),ne=Oe(a),le=Oe(a),se=Oe(r),ae=Oe(r),L((ue=t((ce=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return t=e.call.apply(e,[this].concat(l))||this,o(t,"itemiconmange",ue,n(t)),o(t,"itemPrefab",he,n(t)),o(t,"coinmange",me,n(t)),o(t,"noticeshow",pe,n(t)),o(t,"noticemanage",ge,n(t)),o(t,"bosshuntresult",de,n(t)),o(t,"boxlevelupnode",be,n(t)),o(t,"itemchoosenode",fe,n(t)),o(t,"playerdienode",ve,n(t)),o(t,"boxlevelupshownode",ye,n(t)),o(t,"levelupshownode",Ce,n(t)),o(t,"fightpowernode",we,n(t)),o(t,"itemrate",Ne,n(t)),o(t,"bossitem",Be,n(t)),o(t,"bosslistui",xe,n(t)),o(t,"bosslistwindow",ke,n(t)),o(t,"bosstotallevel",Pe,n(t)),o(t,"bossskill",Ee,n(t)),o(t,"fightui",Ie,n(t)),o(t,"spcenemyeff",Te,n(t)),o(t,"spcenemyeffpre",ze,n(t)),o(t,"newonecomeper",Se,n(t)),t.newonecome=void 0,t.itemiconlist=new Map,t.chooseitemlist=new Array,t.iconlist=void 0,t.intervalId=void 0,t}i(t,e);var l=t.prototype;return l.start=function(){var e=this;this.bosshuntresult.active=!1,this.itemchoosenode.active=!1,this.playerdienode.active=!1,this.boxlevelupshownode.active=!1,this.levelupshownode.active=!1,this.bossskill.active=!1,this.fightpowernode.active=!1,this.boxlevelupnode.on(A.OnBoxLevelUpdate,(function(t){1==e.boxlevelupnode.active&&e.updatelevelupshow(t)}),this)},l.restart=function(){this.bosshuntresult.active=!1,this.itemchoosenode.active=!1,this.playerdienode.active=!1,this.boxlevelupshownode.active=!1,this.levelupshownode.active=!1,this.bossskill.active=!1},l.setcoinnodelist=function(e){this.iconlist=e,this.coinmange.getComponent(U).setcoinnodelist(e)},l.initbosslist=function(e){if(this.onreflashboss(e),this.bosslistwindow.active=!1,e.getbossskill()>0){var t=_e.getbossdatacfg(e.getbossskill());null!=t&&this.reflashbossskillui(t.uiurl)}},l.reflashitemlisticon=function(e){var t=this.itemiconlist.get(e.itemtype);if(null!=t)return t.getChildByName("background").getComponent(c).color=u.color(B(e.qulity)),x(e.iconname,t.getChildByName("itemicon").getComponent(c)),t},l.oninititemlisticon=function(){this.itemiconlist=new Map,this.itemiconmange.destroyAllChildren();for(var e=Y.FIRE;e<Y.MAXITEMTYPE;e++){var t=h(this.itemPrefab);this.itemiconmange.addChild(t),this.itemiconlist.set(e,t),t.getChildByName("itemtype").getComponent(m).string=k(e),t.active=!0}},l.reflashcoinnode=function(e,t){var i=this.iconlist.get(e);if(null!=i){var o=this.getcoinnamebytype(e);i.getChildByName("num").getComponent(m).string=o+":"+t}},l.ongetcoin=function(e,t,i,o){this.coinmange.getComponent(U).createdrop(e,i,o),this.reflashcoinnode(e,t)},l.getcoinnamebytype=function(e){switch(e){case O.COINTYPE_MONEY:return"金钱";case O.COINTYPE_LINSHI:return"灵石";case O.COINTYPE_SBEAST:return"灵兽精魄";default:return""}},l.shownoticefram=function(e){var t=h(this.noticeshow);t.getChildByName("notice").getComponent(m).string=e,t.setParent(this.noticemanage),t.active=!0},l.showhuntbossresult=function(e,t){var i=this;x(e,this.bosshuntresult.getChildByName("result").getComponent(c)),this.bosshuntresult.getComponent(p.Skeleton).setAnimation(0,t,!1),this.bosshuntresult.active=!0,g(this.bosshuntresult.getChildByName("result")).to(5,{scale:new d(2,2)}).start(),this.scheduleOnce((function(){i.bosshuntresult.active=!1}),2)},l.boxlevelupshow=function(e){this.updatelevelupshow(e),this.boxlevelupnode.active=!0},l.updatelevelupshow=function(e){var t=_e.getboxinf(e.getcurboxlevel());if(null!=t){var i=_e.getboxinf(e.getcurboxlevel()+1);if(null!=i){var o=this.boxlevelupnode.getChildByName("before"),n=this.boxlevelupnode.getChildByName("after");o.destroyAllChildren(),n.destroyAllChildren();for(var l=_.QULITY_WIHTE;l<_.QULITY_MAX;l++){var s=u.color(B(l)),a=h(this.itemrate),r=h(this.itemrate);a.getComponent(c).color=s,r.getComponent(c).color=s,a.getChildByName("rate").getComponent(m).string=t.itemqulityrate.get(l)/10+"%",r.getChildByName("rate").getComponent(m).string=i.itemqulityrate.get(l)/10+"%",o.addChild(a),n.addChild(r)}var p=i.lupcost.get(O.COINTYPE_MONEY),g=e.getcoinbytype(O.COINTYPE_MONEY),d=i.lupcost.get(O.COINTYPE_SBEAST),v=e.getcoinbytype(O.COINTYPE_SBEAST);this.boxlevelupnode.getChildByName("needback").getChildByName("itemnum").getComponent(b).string=P(p,g),this.boxlevelupnode.getChildByName("needback").getChildByName("itemnum2").getComponent(b).string=P(d,v);var y="所需人物等级"+P(i.lupbosslevel,e.getplayerlevel());this.boxlevelupnode.getChildByName("needback").getChildByName("bosslevel").getComponent(b).string=y;var C=!0;this.boxlevelupnode.getChildByName("levelup").getComponent(f).interactable=!0,g<p&&(C=!1),v<d&&(C=!1),e.getplayerlevel()<i.lupbosslevel&&(C=!1),C||(this.boxlevelupnode.getChildByName("levelup").getComponent(f).interactable=!1)}else this.shownoticefram("已经达到顶级了")}},l.boxlevelupclose=function(){this.boxlevelupnode.active=!1},l.onboxlevelupupdate=function(e){this.boxlevelupnode.emit(A.OnBoxLevelUpdate,e)},l.closenode=function(e){e.active=!1},l.showgetitemui=function(e,t){this.chooseitemlist=e;for(var i=0;i<e.length;i++){var o=e[i],n="itemnode"+i,l=this.itemchoosenode.getChildByName(n),s=o.itemdes;o.specialtype>0&&(s+=""+E(o.specialtype,o.specialnum)),x(o.iconname,l.getChildByName("itemicon").getComponent(c)),l.getChildByName("itemdes").getComponent(m).string=s,l.getChildByName("itemname").getComponent(b).string=I(o.itemname,o.itemlevel,o.qulity),l.getChildByName("itemiconbac").getComponent(c).color=u.color(B(o.qulity));var a="新发现",r="FC0303";if(t[i]>0){var h=_e.getitemdata(t[i]);a="当前"+h.itemname+":"+h.itemlevel+"级",r=B(h.qulity)}l.getChildByName("level").getComponent(m).string=a,l.getChildByName("level").getComponent(m).color=u.color(r)}this.itemchoosenode.active=!0},l.onchooseitem=function(e,t){var i=this.chooseitemlist[t];null!=i&&this.node.emit(A.OnChooseItem,i),this.itemchoosenode.active=!1},l.onshowplayerdie=function(e,t){this.fightui.active=!1,this.playerdienode.getChildByName("restartback").getChildByName("best").getComponent(m).string="最佳战绩："+t+"秒",this.playerdienode.getChildByName("restartback").getChildByName("current").getComponent(m).string="当前战绩："+e+"秒",this.playerdienode.active=!0},l.oncloseplayerdie=function(){this.playerdienode.active=!1},l.onboxlevelupsu=function(){var e=this;this.boxlevelupshownode.active=!0,this.scheduleOnce((function(){e.boxlevelupshownode.active=!1}),2)},l.onplayerdie=function(e,t){this.oninititemlisticon(),this.onshowplayerdie(e,t)},l.onplayerlevelup=function(e){var t=this;this.levelupshownode.active=!0,this.levelupshownode.getComponent(p.Skeleton).setAnimation(0,"animation",!1),this.scheduleOnce((function(){t.levelupshownode.active=!1}),2)},l.onopenbosslist=function(){this.bosslistwindow.active=!0},l.onreflashboss=function(e){var t=this,i=0;e.getbosslist().forEach((function(o,n,l){var s=_e.getbossdatacfg(n),a="bossui"+s.ID;if(null==t.bosslistui.getChildByName(a)){var r=h(t.bossitem);r.name=a,x(s.uiurl,r.getChildByName("bossicon").getComponent(c)),r.getChildByName("bosslevel").getComponent(m).string="boss类别:"+k(T(n)),r.getChildByName("bossskill").getComponent(m).string="boss属性:"+z(S(n)),r.getChildByName("bossadd").getComponent(m).string="boss加成:"+s.atk+"%",r.getChildByName("bossnum").getComponent(m).string="boss数量:"+o,r.getChildByName("bossstar").getChildByName("snum").getComponent(m).string=""+s.starlevel;var u=r.getChildByName("equipskill");u.on("click",(function(){e.onchangebossskill(n),u.getComponent(f).interactable=!1}),t),t.bosslistui.addChild(r),i+=310}})),i>800&&(this.bosslistui.getComponent(v).anchorY=i),this.bosstotallevel.getComponent(m).string="boss最高星级"+e.getbosslevel()},l.setskillbuttonflag=function(e,t){var i="bossui"+e,o=this.bosslistui.getChildByName(i);null!=o&&(o.getChildByName("equipskill").getComponent(f).interactable=t)},l.reflashbossskillui=function(e){x(e,this.bossskill.getComponent(c)),this.bossskill.active=!0},l.playerreborn=function(){this.oncloseplayerdie(),this.fightui.active=!0,this.fightui.getChildByName("Canvas").getChildByName("player").getComponent(D).onplayerborn()},l.getitemiconnode=function(e){return this.itemiconlist.get(e)},l.playspcefff=function(e,t){var i=h(this.spcenemyeffpre);if(i.parent=this.spcenemyeff,t==M.SPC_y){i.setPosition(-300,e),i.setRotationFromEuler(0,0,90),i.active=!0;var o=60;this.schedule((function(){if(--o>=0){var t=i.position.x+100;i.setPosition(t,e)}else i.destroy()}),.05,60)}if(t==M.SPC_x){i.setPosition(e,-600),i.setRotationFromEuler(0,0,0),i.active=!0;var n=60;this.schedule((function(){if(--n>=0){var t=i.position.y+100;i.setPosition(e,t)}else i.destroy()}),.05,60)}},l.playerspinetest=function(){var e=this.levelupshownode.getComponent(p.Skeleton),t="http://localhost/download/spineres/1/1.json";y.loadAny([{path:"http://localhost/download/spineres/1/1.atlas",ext:".txt"},{path:t,ext:".txt"},{path:"http://localhost/download/spineres/1/1.png",ext:".png"}],(function(i,o){var n=new C;n.image=o[2];var l=new p.SkeletonData;l.skeletonJson=o[1],l.atlasText=o[0],l.textures=[n],l.textureNames=["1.png"],l._uuid=t,e.skeletonData=l}))},l.newonecomeshow=function(e,t){this.newonecome=h(this.newonecomeper),this.newonecome.setParent(e.getParent()),this.newonecome.setPosition(e.getPosition()),this.newonecome.getChildByName("truslate").getComponent(m).string=t,this.newonecome.active=!0},l.newonecomehit=function(){null!=this.newonecome&&this.newonecome.destroy()},l.fightpower=function(e){var t=this;this.fightpowernode.getComponent(v).unscheduleAllCallbacks();var i=this.fightpowernode.getChildByName("up"),o=this.fightpowernode.getChildByName("down");e>0&&(i.active=!0,o.active=!1),e<0&&(o.active=!0,i.active=!1),this.fightpowernode.getChildByName("fightpower").getComponent(m).string=String(e),this.fightpowernode.active=!0,this.fightpowernode.getComponent(v).scheduleOnce((function(){t.fightpowernode.active=!1}),2)},t}(w)).prototype,"itemiconmange",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(ce.prototype,"itemPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(ce.prototype,"coinmange",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(ce.prototype,"noticeshow",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(ce.prototype,"noticemanage",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(ce.prototype,"bosshuntresult",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(ce.prototype,"boxlevelupnode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(ce.prototype,"itemchoosenode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(ce.prototype,"playerdienode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(ce.prototype,"boxlevelupshownode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(ce.prototype,"levelupshownode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(ce.prototype,"fightpowernode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=t(ce.prototype,"itemrate",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(ce.prototype,"bossitem",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=t(ce.prototype,"bosslistui",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(ce.prototype,"bosslistwindow",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(ce.prototype,"bosstotallevel",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(ce.prototype,"bossskill",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(ce.prototype,"fightui",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ce.prototype,"spcenemyeff",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=t(ce.prototype,"spcenemyeffpre",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(ce.prototype,"newonecomeper",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=ce))||re));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});